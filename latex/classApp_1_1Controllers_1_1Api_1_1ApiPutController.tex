\doxysection{Referencia de la clase App\textbackslash{}Controllers\textbackslash{}Api\textbackslash{}Api\+Put\+Controller}
\hypertarget{classApp_1_1Controllers_1_1Api_1_1ApiPutController}{}\label{classApp_1_1Controllers_1_1Api_1_1ApiPutController}\index{App\textbackslash{}Controllers\textbackslash{}Api\textbackslash{}ApiPutController@{App\textbackslash{}Controllers\textbackslash{}Api\textbackslash{}ApiPutController}}


Controlador para manejar solicitudes PUT a la API.  




Diagrama de colaboración de App\textbackslash{}Controllers\textbackslash{}Api\textbackslash{}Api\+Put\+Controller\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=184pt]{classApp_1_1Controllers_1_1Api_1_1ApiPutController__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Métodos públicos}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1Api_1_1ApiPutController_a0431f0440a540ea929ef77296ac9c1cc}{\+\_\+\+\_\+construct}} (\$pdo, \$db)
\begin{DoxyCompactList}\small\item\em Constructor del controlador. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1Api_1_1ApiPutController_a70d7c7752f72c99972964ed6d2718db9}{update\+Fungi}} (\$fungi\+Id, \$data, \$user)
\begin{DoxyCompactList}\small\item\em Actualiza la información de un hongo. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Atributos privados}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1Api_1_1ApiPutController_a1b47788df90c6173fc9f36815a4ec6ba}{\$db}}
\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1Api_1_1ApiPutController_a731bd248c206305d83c5714dac77f929}{\$pdo}}
\end{DoxyCompactItemize}


\doxysubsection{Descripción detallada}
Controlador para manejar solicitudes PUT a la API. 

Esta clase proporciona métodos para procesar diferentes tipos de solicitudes PUT a la API, como actualizar hongos y datos de usuarios. 

Definición en la línea \mbox{\hyperlink{ApiPutController_8php_source_l00016}{16}} del archivo \mbox{\hyperlink{ApiPutController_8php_source}{Api\+Put\+Controller.\+php}}.



\doxysubsection{Documentación de constructores y destructores}
\Hypertarget{classApp_1_1Controllers_1_1Api_1_1ApiPutController_a0431f0440a540ea929ef77296ac9c1cc}\label{classApp_1_1Controllers_1_1Api_1_1ApiPutController_a0431f0440a540ea929ef77296ac9c1cc} 
\index{App\textbackslash{}Controllers\textbackslash{}Api\textbackslash{}ApiPutController@{App\textbackslash{}Controllers\textbackslash{}Api\textbackslash{}ApiPutController}!\_\_construct@{\_\_construct}}
\index{\_\_construct@{\_\_construct}!App\textbackslash{}Controllers\textbackslash{}Api\textbackslash{}ApiPutController@{App\textbackslash{}Controllers\textbackslash{}Api\textbackslash{}ApiPutController}}
\doxysubsubsection{\texorpdfstring{\_\_construct()}{\_\_construct()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Api\textbackslash{}\+Api\+Put\+Controller\+::\+\_\+\+\_\+construct (\begin{DoxyParamCaption}\item[{}]{\$pdo,  }\item[{}]{\$db }\end{DoxyParamCaption})}



Constructor del controlador. 


\begin{DoxyParams}[1]{Parámetros}
\textbackslash{}\+PDO & {\em \$pdo} & Conexión PDO a la base de datos \\
\hline
\textbackslash{}\+App\textbackslash{}\+Controllers\textbackslash{}\+Database\+Controller & {\em \$db} & Modelo de base de datos \\
\hline
\end{DoxyParams}


Definición en la línea \mbox{\hyperlink{ApiPutController_8php_source_l00027}{27}} del archivo \mbox{\hyperlink{ApiPutController_8php_source}{Api\+Put\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00028\ \ \ \ \ \{}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \$this-\/>pdo\ =\ \mbox{\hyperlink{classApp_1_1Controllers_1_1Api_1_1ApiPutController_a731bd248c206305d83c5714dac77f929}{\$pdo}};}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \$this-\/>db\ =\ \mbox{\hyperlink{classApp_1_1Controllers_1_1Api_1_1ApiPutController_a1b47788df90c6173fc9f36815a4ec6ba}{\$db}};}
\DoxyCodeLine{00031\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{ApiPutController_8php_source_l00019}{App\textbackslash{}\+Controllers\textbackslash{}\+Api\textbackslash{}\+Api\+Put\+Controller\textbackslash{}\$db}} y \mbox{\hyperlink{ApiPutController_8php_source_l00018}{App\textbackslash{}\+Controllers\textbackslash{}\+Api\textbackslash{}\+Api\+Put\+Controller\textbackslash{}\$pdo}}.



\doxysubsection{Documentación de funciones miembro}
\Hypertarget{classApp_1_1Controllers_1_1Api_1_1ApiPutController_a70d7c7752f72c99972964ed6d2718db9}\label{classApp_1_1Controllers_1_1Api_1_1ApiPutController_a70d7c7752f72c99972964ed6d2718db9} 
\index{App\textbackslash{}Controllers\textbackslash{}Api\textbackslash{}ApiPutController@{App\textbackslash{}Controllers\textbackslash{}Api\textbackslash{}ApiPutController}!updateFungi@{updateFungi}}
\index{updateFungi@{updateFungi}!App\textbackslash{}Controllers\textbackslash{}Api\textbackslash{}ApiPutController@{App\textbackslash{}Controllers\textbackslash{}Api\textbackslash{}ApiPutController}}
\doxysubsubsection{\texorpdfstring{updateFungi()}{updateFungi()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Api\textbackslash{}\+Api\+Put\+Controller\+::update\+Fungi (\begin{DoxyParamCaption}\item[{}]{\$fungi\+Id,  }\item[{}]{\$data,  }\item[{}]{\$user }\end{DoxyParamCaption})}



Actualiza la información de un hongo. 


\begin{DoxyParams}[1]{Parámetros}
int & {\em \$fungi\+Id} & ID del hongo a actualizar \\
\hline
array & {\em \$data} & Nuevos datos del hongo \\
\hline
array & {\em \$user} & Usuario que realiza la operación \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Resultado de la operación 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{ApiPutController_8php_source_l00041}{41}} del archivo \mbox{\hyperlink{ApiPutController_8php_source}{Api\+Put\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00042\ \ \ \ \ \{}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Verificar\ permisos\ de\ administrador}}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!isset(\$user[\textcolor{stringliteral}{'role'}])\ ||\ \$user[\textcolor{stringliteral}{'role'}]\ !==\ \textcolor{stringliteral}{'admin'})\ \{}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ \ \ \ http\_response\_code(403);}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'success'}\ =>\ \textcolor{keyword}{false},}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'error'}\ =>\ ErrorMessages::AUTH\_UNAUTHORIZED}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ ];}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Verificar\ que\ el\ hongo\ exista}}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \$checkStmt\ =\ \$this-\/>pdo-\/>prepare(\textcolor{stringliteral}{"{}SELECT\ id\ FROM\ fungi\ WHERE\ id\ =\ ?"{}});}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \$checkStmt-\/>execute([\$fungiId]);}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\$checkStmt-\/>fetch())\ \{}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \ http\_response\_code(404);}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'success'}\ =>\ \textcolor{keyword}{false},}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'error'}\ =>\ ErrorMessages::DB\_RECORD\_NOT\_FOUND}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ ];}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Construir\ consulta\ dinámica}}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \$fields\ =\ [];}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \$values\ =\ [];}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{foreach}\ (\$data\ as\ \$field\ =>\ \$value)\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Solo\ permitir\ campos\ válidos}}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (in\_array(\$field,\ [\textcolor{stringliteral}{'name'},\ \textcolor{stringliteral}{'edibility'},\ \textcolor{stringliteral}{'habitat'},\ \textcolor{stringliteral}{'observations'},\ \textcolor{stringliteral}{'common\_name'},\ \textcolor{stringliteral}{'synonym'},\ \textcolor{stringliteral}{'title'}]))\ \{}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$fields[]\ =\ \textcolor{stringliteral}{"{}\$field\ =\ ?"{}};}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$values[]\ =\ \$value;}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (empty(\$fields))\ \{}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ http\_response\_code(400);}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'success'}\ =>\ \textcolor{keyword}{false},}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'error'}\ =>\ \textcolor{stringliteral}{'No\ se\ proporcionaron\ campos\ válidos\ para\ actualizar'}}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ ];}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Agregar\ ID\ para\ la\ cláusula\ WHERE}}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \$values[]\ =\ \$fungiId;}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \$sql\ =\ \textcolor{stringliteral}{"{}UPDATE\ fungi\ SET\ "{}}\ .\ implode(\textcolor{stringliteral}{',\ '},\ \$fields)\ .\ \textcolor{stringliteral}{"{}\ WHERE\ id\ =\ ?"{}};}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \$stmt\ =\ \$this-\/>pdo-\/>prepare(\$sql);}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \$result\ =\ \$stmt-\/>execute(\$values);}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$result)\ \{}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'success'}\ =>\ \textcolor{keyword}{true},}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'message'}\ =>\ \textcolor{stringliteral}{'Hongo\ actualizado\ correctamente'}}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ];}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ http\_response\_code(500);}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'success'}\ =>\ \textcolor{keyword}{false},}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'error'}\ =>\ ErrorMessages::DB\_UPDATE\_ERROR}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ];}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\(\backslash\)PDOException\ \$e)\ \{}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ http\_response\_code(500);}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'success'}\ =>\ \textcolor{keyword}{false},}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'error'}\ =>\ ErrorMessages::format(ErrorMessages::DB\_UPDATE\_ERROR,\ \$e-\/>getMessage())}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ ];}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00110\ \ \ \ \ \}}

\end{DoxyCode}


\doxysubsection{Documentación de datos miembro}
\Hypertarget{classApp_1_1Controllers_1_1Api_1_1ApiPutController_a1b47788df90c6173fc9f36815a4ec6ba}\label{classApp_1_1Controllers_1_1Api_1_1ApiPutController_a1b47788df90c6173fc9f36815a4ec6ba} 
\index{App\textbackslash{}Controllers\textbackslash{}Api\textbackslash{}ApiPutController@{App\textbackslash{}Controllers\textbackslash{}Api\textbackslash{}ApiPutController}!\$db@{\$db}}
\index{\$db@{\$db}!App\textbackslash{}Controllers\textbackslash{}Api\textbackslash{}ApiPutController@{App\textbackslash{}Controllers\textbackslash{}Api\textbackslash{}ApiPutController}}
\doxysubsubsection{\texorpdfstring{\$db}{\$db}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Api\textbackslash{}\+Api\+Put\+Controller\+::\$db\hspace{0.3cm}{\ttfamily [private]}}



Definición en la línea \mbox{\hyperlink{ApiPutController_8php_source_l00019}{19}} del archivo \mbox{\hyperlink{ApiPutController_8php_source}{Api\+Put\+Controller.\+php}}.



Referenciado por \mbox{\hyperlink{ApiPutController_8php_source_l00027}{App\textbackslash{}\+Controllers\textbackslash{}\+Api\textbackslash{}\+Api\+Put\+Controller\textbackslash{}\+\_\+\+\_\+construct()}}.

\Hypertarget{classApp_1_1Controllers_1_1Api_1_1ApiPutController_a731bd248c206305d83c5714dac77f929}\label{classApp_1_1Controllers_1_1Api_1_1ApiPutController_a731bd248c206305d83c5714dac77f929} 
\index{App\textbackslash{}Controllers\textbackslash{}Api\textbackslash{}ApiPutController@{App\textbackslash{}Controllers\textbackslash{}Api\textbackslash{}ApiPutController}!\$pdo@{\$pdo}}
\index{\$pdo@{\$pdo}!App\textbackslash{}Controllers\textbackslash{}Api\textbackslash{}ApiPutController@{App\textbackslash{}Controllers\textbackslash{}Api\textbackslash{}ApiPutController}}
\doxysubsubsection{\texorpdfstring{\$pdo}{\$pdo}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Api\textbackslash{}\+Api\+Put\+Controller\+::\$pdo\hspace{0.3cm}{\ttfamily [private]}}



Definición en la línea \mbox{\hyperlink{ApiPutController_8php_source_l00018}{18}} del archivo \mbox{\hyperlink{ApiPutController_8php_source}{Api\+Put\+Controller.\+php}}.



Referenciado por \mbox{\hyperlink{ApiPutController_8php_source_l00027}{App\textbackslash{}\+Controllers\textbackslash{}\+Api\textbackslash{}\+Api\+Put\+Controller\textbackslash{}\+\_\+\+\_\+construct()}}.



La documentación de esta clase está generada del siguiente archivo\+:\begin{DoxyCompactItemize}
\item 
src/controllers/\+Api/\mbox{\hyperlink{ApiPutController_8php}{Api\+Put\+Controller.\+php}}\end{DoxyCompactItemize}
