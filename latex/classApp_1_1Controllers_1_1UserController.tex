\doxysection{Referencia de la clase App\textbackslash{}Controllers\textbackslash{}User\+Controller}
\hypertarget{classApp_1_1Controllers_1_1UserController}{}\label{classApp_1_1Controllers_1_1UserController}\index{App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}}


Controlador para gestionar operaciones relacionadas con usuarios.  




Diagrama de colaboración de App\textbackslash{}Controllers\textbackslash{}User\+Controller\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=239pt]{classApp_1_1Controllers_1_1UserController__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Métodos públicos}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1UserController_a0fc457be5e0deb25ce6cc80040a51680}{\+\_\+\+\_\+construct}} (\mbox{\hyperlink{classApp_1_1Controllers_1_1DatabaseController}{Database\+Controller}} \$db, \mbox{\hyperlink{classApp_1_1Controllers_1_1SessionController}{Session\+Controller}} \$session, \mbox{\hyperlink{classApp_1_1Controllers_1_1AuthController}{Auth\+Controller}} \$auth=null)
\begin{DoxyCompactList}\small\item\em Constructor del controlador de usuarios. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1UserController_a852373bef5708efdfa174376def5921c}{admin\+Users\+Handler}} ()
\begin{DoxyCompactList}\small\item\em Maneja la página de administración de usuarios. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1UserController_a19532059efd80938e66ffb2dbb9327b6}{change\+Password}} (\$user\+Id, \$current\+Password, \$new\+Password, \$confirm\+Password)
\begin{DoxyCompactList}\small\item\em Cambia la contraseña de un usuario. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1UserController_ae2c5c8313727d8298c1785255cb06515}{email\+Exists}} (\$email)
\begin{DoxyCompactList}\small\item\em Verifica si un email ya está registrado. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1UserController_ab72a7f7dfcbde8e491d129005291984d}{get\+User\+By\+Id}} (\$user\+Id, \$include\+Private=false)
\begin{DoxyCompactList}\small\item\em Obtiene la información de un usuario por ID. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1UserController_ad6c999418213f7d84be0be50cb80136a}{login}} (\$email, \$password, \$remember=false)
\begin{DoxyCompactList}\small\item\em Autentica a un usuario en el sistema. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1UserController_a2c6a4785db5beeb6c5dbedf60787b391}{logout}} ()
\begin{DoxyCompactList}\small\item\em Cierra la sesión del usuario actual. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1UserController_a9b1cee33c89323576b5df64d7d093d5b}{profile\+Handler}} (\$params=\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em Maneja la visualización y edición del perfil del usuario. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1UserController_a82bb0c148faaf67999a6ef23ecefe468}{register}} (\$username, \$email, \$password, \$confirm\+Password)
\begin{DoxyCompactList}\small\item\em Registra un nuevo usuario en el sistema. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1UserController_ab9ca090b611bf2c8d3abcf160d113762}{update\+Profile}} (\$user\+Id, \$data)
\begin{DoxyCompactList}\small\item\em Actualiza la información del perfil de usuario. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1UserController_aa25c242fa797f235533277b8dd5f0255}{username\+Exists}} (\$username)
\begin{DoxyCompactList}\small\item\em Verifica si un nombre de usuario ya está registrado. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Métodos privados}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1UserController_a58df8b576c286304387b3f6fa8cec35b}{get\+All\+Users}} ()
\begin{DoxyCompactList}\small\item\em Obtiene todos los usuarios de la base de datos. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1UserController_ac56e6d2c7a043410095917d7ac362a78}{update\+User\+Profile}} (\$user\+Id, \$data)
\begin{DoxyCompactList}\small\item\em Actualiza el perfil del usuario en la base de datos. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1UserController_aafbbbe1bc02d5f9ec10780422a6d2fcb}{validate\+Profile\+Update}} (\$data)
\begin{DoxyCompactList}\small\item\em Valida los datos de actualización de perfil. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Atributos privados}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1UserController_ae6a680f1ece5b780b453ca40b6f75553}{\$auth}}
\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1UserController_a52d440c58786943b440bad35f3a38ca6}{\$db}}
\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1UserController_a306a90e334b0318afd0b65af792eb3a7}{\$session}}
\end{DoxyCompactItemize}


\doxysubsection{Descripción detallada}
Controlador para gestionar operaciones relacionadas con usuarios. 

Este controlador centraliza todas las funciones relacionadas con usuarios, incluyendo perfiles, preferencias y administración de usuarios. 

Definición en la línea \mbox{\hyperlink{UserController_8php_source_l00014}{14}} del archivo \mbox{\hyperlink{UserController_8php_source}{User\+Controller.\+php}}.



\doxysubsection{Documentación de constructores y destructores}
\Hypertarget{classApp_1_1Controllers_1_1UserController_a0fc457be5e0deb25ce6cc80040a51680}\label{classApp_1_1Controllers_1_1UserController_a0fc457be5e0deb25ce6cc80040a51680} 
\index{App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}!\_\_construct@{\_\_construct}}
\index{\_\_construct@{\_\_construct}!App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}}
\doxysubsubsection{\texorpdfstring{\_\_construct()}{\_\_construct()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\+::\+\_\+\+\_\+construct (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classApp_1_1Controllers_1_1DatabaseController}{Database\+Controller}}}]{\$db,  }\item[{\mbox{\hyperlink{classApp_1_1Controllers_1_1SessionController}{Session\+Controller}}}]{\$session,  }\item[{\mbox{\hyperlink{classApp_1_1Controllers_1_1AuthController}{Auth\+Controller}}}]{\$auth = {\ttfamily null} }\end{DoxyParamCaption})}



Constructor del controlador de usuarios. 


\begin{DoxyParams}[1]{Parámetros}
Database\+Controller & {\em \$db} & Instancia del controlador de base de datos \\
\hline
Session\+Controller & {\em \$session} & Instancia del controlador de sesiones \\
\hline
Auth\+Controller & {\em \$auth} & Instancia del controlador de autenticación \\
\hline
\end{DoxyParams}


Definición en la línea \mbox{\hyperlink{UserController_8php_source_l00033}{33}} del archivo \mbox{\hyperlink{UserController_8php_source}{User\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \$this-\/>db\ =\ \mbox{\hyperlink{classApp_1_1Controllers_1_1UserController_a52d440c58786943b440bad35f3a38ca6}{\$db}};}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \$this-\/>session\ =\ \mbox{\hyperlink{classApp_1_1Controllers_1_1UserController_a306a90e334b0318afd0b65af792eb3a7}{\$session}};}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \$this-\/>auth\ =\ \mbox{\hyperlink{classApp_1_1Controllers_1_1UserController_ae6a680f1ece5b780b453ca40b6f75553}{\$auth}}\ ??\ \textcolor{keyword}{new}\ AuthController(\mbox{\hyperlink{classApp_1_1Controllers_1_1UserController_a52d440c58786943b440bad35f3a38ca6}{\$db}});}
\DoxyCodeLine{00037\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{UserController_8php_source_l00024}{App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\textbackslash{}\$auth}}, \mbox{\hyperlink{UserController_8php_source_l00018}{App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\textbackslash{}\$db}} y \mbox{\hyperlink{UserController_8php_source_l00023}{App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\textbackslash{}\$session}}.



\doxysubsection{Documentación de funciones miembro}
\Hypertarget{classApp_1_1Controllers_1_1UserController_a852373bef5708efdfa174376def5921c}\label{classApp_1_1Controllers_1_1UserController_a852373bef5708efdfa174376def5921c} 
\index{App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}!adminUsersHandler@{adminUsersHandler}}
\index{adminUsersHandler@{adminUsersHandler}!App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}}
\doxysubsubsection{\texorpdfstring{adminUsersHandler()}{adminUsersHandler()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\+::admin\+Users\+Handler (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Maneja la página de administración de usuarios. 

\begin{DoxyReturn}{Devuelve}
array Datos para la plantilla 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{UserController_8php_source_l00171}{171}} del archivo \mbox{\hyperlink{UserController_8php_source}{User\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Verificar\ si\ es\ administrador}}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\$this-\/>session-\/>isAdmin())\ \{}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ header(\textcolor{stringliteral}{'Location:\ /'});}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ exit;}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Obtener\ lista\ de\ usuarios}}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \$users\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1UserController_a58df8b576c286304387b3f6fa8cec35b}{getAllUsers}}();}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'title'}\ =>\ \_(\textcolor{stringliteral}{'Administración\ de\ Usuarios'}),}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'users'}\ =>\ \$users}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ ];}
\DoxyCodeLine{00185\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{UserController_8php_source_l00192}{App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\textbackslash{}get\+All\+Users()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1UserController_a852373bef5708efdfa174376def5921c_cgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1UserController_a19532059efd80938e66ffb2dbb9327b6}\label{classApp_1_1Controllers_1_1UserController_a19532059efd80938e66ffb2dbb9327b6} 
\index{App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}!changePassword@{changePassword}}
\index{changePassword@{changePassword}!App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}}
\doxysubsubsection{\texorpdfstring{changePassword()}{changePassword()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\+::change\+Password (\begin{DoxyParamCaption}\item[{}]{\$user\+Id,  }\item[{}]{\$current\+Password,  }\item[{}]{\$new\+Password,  }\item[{}]{\$confirm\+Password }\end{DoxyParamCaption})}



Cambia la contraseña de un usuario. 

Verifica la contraseña actual y actualiza a la nueva contraseña


\begin{DoxyParams}[1]{Parámetros}
int & {\em \$user\+Id} & ID del usuario \\
\hline
string & {\em \$current\+Password} & Contraseña actual \\
\hline
string & {\em \$new\+Password} & Nueva contraseña \\
\hline
string & {\em \$confirm\+Password} & Confirmación de nueva contraseña\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Resultado de la operación con estado y mensaje 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{UserController_8php_source_l00273}{273}} del archivo \mbox{\hyperlink{UserController_8php_source}{User\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ...\ existing\ code\ ...}}
\DoxyCodeLine{00275\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Controllers_1_1UserController_ae2c5c8313727d8298c1785255cb06515}\label{classApp_1_1Controllers_1_1UserController_ae2c5c8313727d8298c1785255cb06515} 
\index{App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}!emailExists@{emailExists}}
\index{emailExists@{emailExists}!App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}}
\doxysubsubsection{\texorpdfstring{emailExists()}{emailExists()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\+::email\+Exists (\begin{DoxyParamCaption}\item[{}]{\$email }\end{DoxyParamCaption})}



Verifica si un email ya está registrado. 


\begin{DoxyParams}[1]{Parámetros}
string & {\em \$email} & Correo electrónico a verificar\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
bool TRUE si el email existe, FALSE en caso contrario 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{UserController_8php_source_l00296}{296}} del archivo \mbox{\hyperlink{UserController_8php_source}{User\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ...\ existing\ code\ ...}}
\DoxyCodeLine{00298\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Controllers_1_1UserController_a58df8b576c286304387b3f6fa8cec35b}\label{classApp_1_1Controllers_1_1UserController_a58df8b576c286304387b3f6fa8cec35b} 
\index{App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}!getAllUsers@{getAllUsers}}
\index{getAllUsers@{getAllUsers}!App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}}
\doxysubsubsection{\texorpdfstring{getAllUsers()}{getAllUsers()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\+::get\+All\+Users (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Obtiene todos los usuarios de la base de datos. 

\begin{DoxyReturn}{Devuelve}
array Lista de usuarios 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{UserController_8php_source_l00192}{192}} del archivo \mbox{\hyperlink{UserController_8php_source}{User\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \$sql\ =\ \textcolor{stringliteral}{"{}SELECT\ id,\ username,\ email,\ role,\ created\_at,\ last\_login\ FROM\ users\ ORDER\ BY\ id\ DESC"{}};}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \$result\ =\ \$this-\/>db-\/>query(\$sql);}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$result-\/>fetchAll(\(\backslash\)PDO::FETCH\_ASSOC);}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\(\backslash\)Exception\ \$e)\ \{}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}Error\ al\ obtener\ usuarios:\ "{}}\ .\ \$e-\/>getMessage());}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [];}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00201\ \ \ \ \ \}}

\end{DoxyCode}


Referenciado por \mbox{\hyperlink{UserController_8php_source_l00171}{App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\textbackslash{}admin\+Users\+Handler()}}.

Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1UserController_a58df8b576c286304387b3f6fa8cec35b_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1UserController_ab72a7f7dfcbde8e491d129005291984d}\label{classApp_1_1Controllers_1_1UserController_ab72a7f7dfcbde8e491d129005291984d} 
\index{App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}!getUserById@{getUserById}}
\index{getUserById@{getUserById}!App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}}
\doxysubsubsection{\texorpdfstring{getUserById()}{getUserById()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\+::get\+User\+By\+Id (\begin{DoxyParamCaption}\item[{}]{\$user\+Id,  }\item[{}]{\$include\+Private = {\ttfamily false} }\end{DoxyParamCaption})}



Obtiene la información de un usuario por ID. 


\begin{DoxyParams}[1]{Parámetros}
int & {\em \$user\+Id} & ID del usuario \\
\hline
bool & {\em \$include\+Private} & Indica si se deben incluir datos privados\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array\texorpdfstring{$\vert$}{|}null Datos del usuario o null si no existe 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{UserController_8php_source_l00285}{285}} del archivo \mbox{\hyperlink{UserController_8php_source}{User\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ...\ existing\ code\ ...}}
\DoxyCodeLine{00287\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Controllers_1_1UserController_ad6c999418213f7d84be0be50cb80136a}\label{classApp_1_1Controllers_1_1UserController_ad6c999418213f7d84be0be50cb80136a} 
\index{App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}!login@{login}}
\index{login@{login}!App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}}
\doxysubsubsection{\texorpdfstring{login()}{login()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\+::login (\begin{DoxyParamCaption}\item[{}]{\$email,  }\item[{}]{\$password,  }\item[{}]{\$remember = {\ttfamily false} }\end{DoxyParamCaption})}



Autentica a un usuario en el sistema. 

Verifica las credenciales del usuario contra la base de datos, e inicia sesión si son correctas.


\begin{DoxyParams}[1]{Parámetros}
string & {\em \$email} & Correo electrónico \\
\hline
string & {\em \$password} & Contraseña \\
\hline
bool & {\em \$remember} & Indica si se debe mantener la sesión (cookie persistente)\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Resultado de la operación con estado y mensaje 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{UserController_8php_source_l00232}{232}} del archivo \mbox{\hyperlink{UserController_8php_source}{User\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ...\ existing\ code\ ...}}
\DoxyCodeLine{00234\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Controllers_1_1UserController_a2c6a4785db5beeb6c5dbedf60787b391}\label{classApp_1_1Controllers_1_1UserController_a2c6a4785db5beeb6c5dbedf60787b391} 
\index{App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}!logout@{logout}}
\index{logout@{logout}!App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}}
\doxysubsubsection{\texorpdfstring{logout()}{logout()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\+::logout (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Cierra la sesión del usuario actual. 

Elimina todos los datos de sesión y cookies relacionadas con la autenticación

\begin{DoxyReturn}{Devuelve}
bool TRUE si la operación fue exitosa 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{UserController_8php_source_l00243}{243}} del archivo \mbox{\hyperlink{UserController_8php_source}{User\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ...\ existing\ code\ ...}}
\DoxyCodeLine{00245\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Controllers_1_1UserController_a9b1cee33c89323576b5df64d7d093d5b}\label{classApp_1_1Controllers_1_1UserController_a9b1cee33c89323576b5df64d7d093d5b} 
\index{App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}!profileHandler@{profileHandler}}
\index{profileHandler@{profileHandler}!App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}}
\doxysubsubsection{\texorpdfstring{profileHandler()}{profileHandler()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\+::profile\+Handler (\begin{DoxyParamCaption}\item[{}]{\$params = {\ttfamily \mbox{[}\mbox{]}} }\end{DoxyParamCaption})}



Maneja la visualización y edición del perfil del usuario. 

Permite al usuario modificar datos como nombre, biografía, imagen, etc.


\begin{DoxyParams}[1]{Parámetros}
array & {\em \$params} & Parámetros de la solicitud \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Datos para la plantilla 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{UserController_8php_source_l00047}{47}} del archivo \mbox{\hyperlink{UserController_8php_source}{User\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Verificar\ si\ el\ usuario\ está\ autenticado}}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\$this-\/>session-\/>isLoggedIn())\ \{}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ header(\textcolor{stringliteral}{'Location:\ /login?redirect=/profile'});}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \ \ exit;}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \$userId\ =\ \$\_SESSION[\textcolor{stringliteral}{'user\_id'}];}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \$userData\ =\ \$this-\/>session-\/>getUserData();}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \$errors\ =\ [];}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \$success\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Obtener\ estadísticas\ del\ usuario}}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \$stats\ =\ \$this-\/>db-\/>query(\textcolor{stringliteral}{"{}}}
\DoxyCodeLine{00061\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ SELECT\ }}
\DoxyCodeLine{00062\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (SELECT\ COUNT(*)\ FROM\ user\_likes\ WHERE\ user\_id\ =\ ?)\ as\ likes\_count,}}
\DoxyCodeLine{00063\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (SELECT\ COUNT(*)\ FROM\ user\_favorites\ WHERE\ user\_id\ =\ ?)\ as\ favorites\_count,}}
\DoxyCodeLine{00064\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (SELECT\ COUNT(*)\ FROM\ comments\ WHERE\ user\_id\ =\ ?)\ as\ comments\_count,}}
\DoxyCodeLine{00065\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (SELECT\ COUNT(*)\ FROM\ contributions\ WHERE\ user\_id\ =\ ?)\ as\ contributions\_count}}
\DoxyCodeLine{00066\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}},\ [\$userId,\ \$userId,\ \$userId,\ \$userId])[0]\ ??\ [];}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Actualizar\ el\ usuario\ con\ los\ contadores}}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \$userData[\textcolor{stringliteral}{'likes\_count'}]\ =\ \$stats[\textcolor{stringliteral}{'likes\_count'}]\ ??\ 0;}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \$userData[\textcolor{stringliteral}{'favorites\_count'}]\ =\ \$stats[\textcolor{stringliteral}{'favorites\_count'}]\ ??\ 0;}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \$userData[\textcolor{stringliteral}{'comments\_count'}]\ =\ \$stats[\textcolor{stringliteral}{'comments\_count'}]\ ??\ 0;}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \$userData[\textcolor{stringliteral}{'contributions\_count'}]\ =\ \$stats[\textcolor{stringliteral}{'contributions\_count'}]\ ??\ 0;}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Obtener\ acciones\ recientes\ del\ usuario}}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \$actions\ =\ \$this-\/>db-\/>query(\textcolor{stringliteral}{"{}}}
\DoxyCodeLine{00076\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ SELECT\ a.*,\ 'check'\ as\ icon,\ 'primary'\ as\ color}}
\DoxyCodeLine{00077\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ FROM\ access\_logs\ a}}
\DoxyCodeLine{00078\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ WHERE\ a.user\_id\ =\ ?}}
\DoxyCodeLine{00079\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ ORDER\ BY\ a.access\_time\ DESC}}
\DoxyCodeLine{00080\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ LIMIT\ 5}}
\DoxyCodeLine{00081\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}},\ [\$userId]);}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Procesar\ formulario\ de\ actualización\ de\ perfil}}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$\_SERVER[\textcolor{stringliteral}{'REQUEST\_METHOD'}]\ ===\ \textcolor{stringliteral}{'POST'}\ \&\&\ isset(\$\_POST[\textcolor{stringliteral}{'update\_profile'}]))\ \{}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \$errors\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1UserController_aafbbbe1bc02d5f9ec10780422a6d2fcb}{validateProfileUpdate}}(\$\_POST);}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (empty(\$errors))\ \{}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$success\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1UserController_ac56e6d2c7a043410095917d7ac362a78}{updateUserProfile}}(\$userData[\textcolor{stringliteral}{'id'}],\ \$\_POST);}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$success)\ \{}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$userData\ =\ \$this-\/>session-\/>getUserData();\ \textcolor{comment}{//\ Recargar\ datos\ actualizados}}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'title'}\ =>\ \textcolor{stringliteral}{'Perfil\ de\ '}\ .\ \$userData[\textcolor{stringliteral}{'username'}],}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'user'}\ =>\ \$userData,}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'user\_actions'}\ =>\ \$actions,}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'errors'}\ =>\ \$errors,}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'success'}\ =>\ \$success,}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'is\_own\_profile'}\ =>\ \textcolor{keyword}{true}\ \ \textcolor{comment}{//\ Variable\ crucial\ para\ mostrar\ opciones\ de\ configuración}}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ ];}
\DoxyCodeLine{00103\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{UserController_8php_source_l00136}{App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\textbackslash{}update\+User\+Profile()}} y \mbox{\hyperlink{UserController_8php_source_l00113}{App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\textbackslash{}validate\+Profile\+Update()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1UserController_a9b1cee33c89323576b5df64d7d093d5b_cgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1UserController_a82bb0c148faaf67999a6ef23ecefe468}\label{classApp_1_1Controllers_1_1UserController_a82bb0c148faaf67999a6ef23ecefe468} 
\index{App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}!register@{register}}
\index{register@{register}!App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}}
\doxysubsubsection{\texorpdfstring{register()}{register()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\+::register (\begin{DoxyParamCaption}\item[{}]{\$username,  }\item[{}]{\$email,  }\item[{}]{\$password,  }\item[{}]{\$confirm\+Password }\end{DoxyParamCaption})}



Registra un nuevo usuario en el sistema. 

Valida los datos de entrada, verifica que el email y username no existan, y crea un nuevo registro de usuario con la contraseña hasheada.


\begin{DoxyParams}[1]{Parámetros}
string & {\em \$username} & Nombre de usuario \\
\hline
string & {\em \$email} & Correo electrónico \\
\hline
string & {\em \$password} & Contraseña en texto plano \\
\hline
string & {\em \$confirm\+Password} & Confirmación de contraseña\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Resultado de la operación con estado y mensaje 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{UserController_8php_source_l00216}{216}} del archivo \mbox{\hyperlink{UserController_8php_source}{User\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ...\ existing\ code\ ...}}
\DoxyCodeLine{00218\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Controllers_1_1UserController_ab9ca090b611bf2c8d3abcf160d113762}\label{classApp_1_1Controllers_1_1UserController_ab9ca090b611bf2c8d3abcf160d113762} 
\index{App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}!updateProfile@{updateProfile}}
\index{updateProfile@{updateProfile}!App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}}
\doxysubsubsection{\texorpdfstring{updateProfile()}{updateProfile()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\+::update\+Profile (\begin{DoxyParamCaption}\item[{}]{\$user\+Id,  }\item[{}]{\$data }\end{DoxyParamCaption})}



Actualiza la información del perfil de usuario. 

Permite al usuario modificar datos como nombre, biografía, imagen, etc.


\begin{DoxyParams}[1]{Parámetros}
int & {\em \$user\+Id} & ID del usuario \\
\hline
array & {\em \$data} & Datos a actualizar en formato clave-\/valor\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Resultado de la operación con estado y mensaje 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{UserController_8php_source_l00257}{257}} del archivo \mbox{\hyperlink{UserController_8php_source}{User\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ...\ existing\ code\ ...}}
\DoxyCodeLine{00259\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Controllers_1_1UserController_ac56e6d2c7a043410095917d7ac362a78}\label{classApp_1_1Controllers_1_1UserController_ac56e6d2c7a043410095917d7ac362a78} 
\index{App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}!updateUserProfile@{updateUserProfile}}
\index{updateUserProfile@{updateUserProfile}!App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}}
\doxysubsubsection{\texorpdfstring{updateUserProfile()}{updateUserProfile()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\+::update\+User\+Profile (\begin{DoxyParamCaption}\item[{}]{\$user\+Id,  }\item[{}]{\$data }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Actualiza el perfil del usuario en la base de datos. 

Actualiza los datos del usuario en la base de datos según los datos proporcionados.


\begin{DoxyParams}[1]{Parámetros}
int & {\em \$user\+Id} & ID del usuario \\
\hline
array & {\em \$data} & Datos a actualizar \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
bool Resultado de la operación 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{UserController_8php_source_l00136}{136}} del archivo \mbox{\hyperlink{UserController_8php_source}{User\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \$fields\ =\ [];}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \$params\ =\ [];}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Determinar\ qué\ campos\ actualizar}}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!empty(\$data[\textcolor{stringliteral}{'email'}]))\ \{}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$fields[]\ =\ \textcolor{stringliteral}{"{}email\ =\ :email"{}};}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$params[\textcolor{stringliteral}{':email'}]\ =\ \$data[\textcolor{stringliteral}{'email'}];}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!empty(\$data[\textcolor{stringliteral}{'display\_name'}]))\ \{}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$fields[]\ =\ \textcolor{stringliteral}{"{}display\_name\ =\ :display\_name"{}};}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$params[\textcolor{stringliteral}{':display\_name'}]\ =\ \$data[\textcolor{stringliteral}{'display\_name'}];}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Solo\ actualizar\ si\ hay\ campos\ para\ actualizar}}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!empty(\$fields))\ \{}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$params[\textcolor{stringliteral}{':id'}]\ =\ \$userId;}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$sql\ =\ \textcolor{stringliteral}{"{}UPDATE\ users\ SET\ "{}}\ .\ implode(\textcolor{stringliteral}{"{},\ "{}},\ \$fields)\ .\ \textcolor{stringliteral}{"{}\ WHERE\ id\ =\ :id"{}};}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>db-\/>query(\$sql,\ \$params);}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\(\backslash\)Exception\ \$e)\ \{}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}Error\ al\ actualizar\ perfil:\ "{}}\ .\ \$e-\/>getMessage());}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00164\ \ \ \ \ \}}

\end{DoxyCode}


Referenciado por \mbox{\hyperlink{UserController_8php_source_l00047}{App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\textbackslash{}profile\+Handler()}}.

Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1UserController_ac56e6d2c7a043410095917d7ac362a78_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1UserController_aa25c242fa797f235533277b8dd5f0255}\label{classApp_1_1Controllers_1_1UserController_aa25c242fa797f235533277b8dd5f0255} 
\index{App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}!usernameExists@{usernameExists}}
\index{usernameExists@{usernameExists}!App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}}
\doxysubsubsection{\texorpdfstring{usernameExists()}{usernameExists()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\+::username\+Exists (\begin{DoxyParamCaption}\item[{}]{\$username }\end{DoxyParamCaption})}



Verifica si un nombre de usuario ya está registrado. 


\begin{DoxyParams}[1]{Parámetros}
string & {\em \$username} & Nombre de usuario a verificar\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
bool TRUE si el username existe, FALSE en caso contrario 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{UserController_8php_source_l00307}{307}} del archivo \mbox{\hyperlink{UserController_8php_source}{User\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ...\ existing\ code\ ...}}
\DoxyCodeLine{00309\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Controllers_1_1UserController_aafbbbe1bc02d5f9ec10780422a6d2fcb}\label{classApp_1_1Controllers_1_1UserController_aafbbbe1bc02d5f9ec10780422a6d2fcb} 
\index{App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}!validateProfileUpdate@{validateProfileUpdate}}
\index{validateProfileUpdate@{validateProfileUpdate}!App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}}
\doxysubsubsection{\texorpdfstring{validateProfileUpdate()}{validateProfileUpdate()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\+::validate\+Profile\+Update (\begin{DoxyParamCaption}\item[{}]{\$data }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Valida los datos de actualización de perfil. 

Verifica que los datos ingresados sean válidos para actualizar el perfil del usuario.


\begin{DoxyParams}[1]{Parámetros}
array & {\em \$data} & Datos del formulario \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Errores de validación encontrados 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{UserController_8php_source_l00113}{113}} del archivo \mbox{\hyperlink{UserController_8php_source}{User\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \$errors\ =\ [];}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Validar\ email}}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (isset(\$data[\textcolor{stringliteral}{'email'}])\ \&\&\ !filter\_var(\$data[\textcolor{stringliteral}{'email'}],\ FILTER\_VALIDATE\_EMAIL))\ \{}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \$errors[\textcolor{stringliteral}{'email'}]\ =\ \_(\textcolor{stringliteral}{'El\ formato\ del\ email\ no\ es\ válido'});}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Otras\ validaciones\ según\ necesidades}}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ...}}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$errors;}
\DoxyCodeLine{00125\ \ \ \ \ \}}

\end{DoxyCode}


Referenciado por \mbox{\hyperlink{UserController_8php_source_l00047}{App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\textbackslash{}profile\+Handler()}}.

Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1UserController_aafbbbe1bc02d5f9ec10780422a6d2fcb_icgraph}
\end{center}
\end{figure}


\doxysubsection{Documentación de datos miembro}
\Hypertarget{classApp_1_1Controllers_1_1UserController_ae6a680f1ece5b780b453ca40b6f75553}\label{classApp_1_1Controllers_1_1UserController_ae6a680f1ece5b780b453ca40b6f75553} 
\index{App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}!\$auth@{\$auth}}
\index{\$auth@{\$auth}!App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}}
\doxysubsubsection{\texorpdfstring{\$auth}{\$auth}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\+::\$auth\hspace{0.3cm}{\ttfamily [private]}}



Definición en la línea \mbox{\hyperlink{UserController_8php_source_l00024}{24}} del archivo \mbox{\hyperlink{UserController_8php_source}{User\+Controller.\+php}}.



Referenciado por \mbox{\hyperlink{UserController_8php_source_l00033}{App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\textbackslash{}\+\_\+\+\_\+construct()}}.

\Hypertarget{classApp_1_1Controllers_1_1UserController_a52d440c58786943b440bad35f3a38ca6}\label{classApp_1_1Controllers_1_1UserController_a52d440c58786943b440bad35f3a38ca6} 
\index{App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}!\$db@{\$db}}
\index{\$db@{\$db}!App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}}
\doxysubsubsection{\texorpdfstring{\$db}{\$db}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\+::\$db\hspace{0.3cm}{\ttfamily [private]}}



Definición en la línea \mbox{\hyperlink{UserController_8php_source_l00018}{18}} del archivo \mbox{\hyperlink{UserController_8php_source}{User\+Controller.\+php}}.



Referenciado por \mbox{\hyperlink{UserController_8php_source_l00033}{App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\textbackslash{}\+\_\+\+\_\+construct()}}.

\Hypertarget{classApp_1_1Controllers_1_1UserController_a306a90e334b0318afd0b65af792eb3a7}\label{classApp_1_1Controllers_1_1UserController_a306a90e334b0318afd0b65af792eb3a7} 
\index{App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}!\$session@{\$session}}
\index{\$session@{\$session}!App\textbackslash{}Controllers\textbackslash{}UserController@{App\textbackslash{}Controllers\textbackslash{}UserController}}
\doxysubsubsection{\texorpdfstring{\$session}{\$session}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\+::\$session\hspace{0.3cm}{\ttfamily [private]}}



Definición en la línea \mbox{\hyperlink{UserController_8php_source_l00023}{23}} del archivo \mbox{\hyperlink{UserController_8php_source}{User\+Controller.\+php}}.



Referenciado por \mbox{\hyperlink{UserController_8php_source_l00033}{App\textbackslash{}\+Controllers\textbackslash{}\+User\+Controller\textbackslash{}\+\_\+\+\_\+construct()}}.



La documentación de esta clase está generada del siguiente archivo\+:\begin{DoxyCompactItemize}
\item 
src/controllers/\mbox{\hyperlink{UserController_8php}{User\+Controller.\+php}}\end{DoxyCompactItemize}
