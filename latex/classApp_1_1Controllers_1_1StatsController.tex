\doxysection{Referencia de la clase App\textbackslash{}Controllers\textbackslash{}Stats\+Controller}
\hypertarget{classApp_1_1Controllers_1_1StatsController}{}\label{classApp_1_1Controllers_1_1StatsController}\index{App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}}


Controlador para generar estadísticas de hongos.  




Diagrama de colaboración de App\textbackslash{}Controllers\textbackslash{}Stats\+Controller\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=241pt]{classApp_1_1Controllers_1_1StatsController__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Métodos públicos}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_aa29167da3f341e9199c640b102e5fc97}{\+\_\+\+\_\+construct}} (\$db)
\begin{DoxyCompactList}\small\item\em Constructor del controlador de estadísticas. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_ab34ffd8a338bf1ef2251c21a3ef00dac}{get\+Addition\+Trends}} (\$time\+Range=\textquotesingle{}year\textquotesingle{})
\begin{DoxyCompactList}\small\item\em Obtiene las tendencias de adición de hongos en diferentes períodos. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_af2a1c7f7fb5c2ec3ddc6a82c7c9b5944}{get\+All\+Stats\+For\+Page}} ()
\begin{DoxyCompactList}\small\item\em Obtiene todas las estadísticas necesarias para la página de estadísticas. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_a23b681a8cc748f3cfeff24da0e6d8e34}{get\+Dashboard\+Stats}} ()
\begin{DoxyCompactList}\small\item\em Obtiene todas las estadísticas necesarias para el panel de administración. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_a339d384906766d15e008dbfda50a2ca8}{get\+Edibility\+Stats}} (\$time\+Range=\textquotesingle{}all\textquotesingle{})
\begin{DoxyCompactList}\small\item\em Obtiene estadísticas de comestibilidad de hongos. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_a944a68a075295dfdc85e7e403b469358}{get\+Fungi\+Stats}} (\$time\+Range=\textquotesingle{}all\textquotesingle{})
\begin{DoxyCompactList}\small\item\em Obtiene todas las estadísticas relacionadas con hongos. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_a6c42f9fa6d2e3d47cd1910b324b710a3}{get\+General\+Stats}} (\$time\+Range=\textquotesingle{}all\textquotesingle{})
\begin{DoxyCompactList}\small\item\em Obtiene estadísticas generales sobre los hongos en la base de datos. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_adbb5bc3855f90767c23682879866eb94}{get\+Habitat\+Distribution}} (\$limit=10)
\begin{DoxyCompactList}\small\item\em Obtiene la distribución de hongos por hábitat. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_afe5d0d166fdfb1ca6e957a673a2e9e47}{get\+Most\+Viewed\+Fungi}} (\$limit=5)
\begin{DoxyCompactList}\small\item\em Obtiene los hongos más visitados. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_abaa9ec5f3cfb54693308bfb1ec304163}{get\+Top\+Families}} (\$time\+Range=\textquotesingle{}all\textquotesingle{}, \$limit=10)
\begin{DoxyCompactList}\small\item\em Obtiene las familias de hongos más comunes. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_a33d5205f64fa0acd29b3416a6b5b5308}{get\+Top\+Favorites}} (\$limit=5)
\begin{DoxyCompactList}\small\item\em Obtiene los hongos más añadidos a favoritos. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_ac15d7095c544e0023e61febc70e6e690}{get\+Top\+Liked}} (\$limit=5)
\begin{DoxyCompactList}\small\item\em Obtiene los hongos más likeados. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Métodos privados}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_a19103b3b40588b307b330f1b37e408d8}{get\+Class\+Stats}} (\$time\+Range)
\begin{DoxyCompactList}\small\item\em Obtiene estadísticas sobre las clases taxonómicas de hongos. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_a42b7befe748ebafdfaf9a1e1669b6a4a}{get\+Division\+Stats}} (\$time\+Range)
\begin{DoxyCompactList}\small\item\em Obtiene estadísticas sobre las divisiones taxonómicas de hongos. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_a9e0cdd48bfd132bccade19031dca3c25}{get\+Family\+Stats}} (\$time\+Range)
\begin{DoxyCompactList}\small\item\em Obtiene estadísticas sobre las familias de hongos más comunes. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_a2ff7db3ac8f173dbccfbbb9d61b9412f}{get\+Order\+Stats}} (\$time\+Range)
\begin{DoxyCompactList}\small\item\em Obtiene estadísticas sobre los órdenes taxonómicos de hongos. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_a9e81a77bff8dcf7481dbc58a4265ebe8}{get\+Popular\+Fungi}} (\$time\+Range)
\begin{DoxyCompactList}\small\item\em Obtiene los hongos más populares basados en vistas. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_acbbde5b1dcd9bfac461c687cc57236c7}{get\+Recent\+Additions}} (\$time\+Range)
\begin{DoxyCompactList}\small\item\em Obtiene los hongos añadidos recientemente. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_acbcc9cd24df7ea83bb72e818e3cf4ebe}{get\+Time\+Range\+Condition}} (\$time\+Range)
\begin{DoxyCompactList}\small\item\em Genera la condición SQL para filtrar por rango de tiempo. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_aa6d98d1284d05b3772442f189f643a88}{get\+Total\+Fungi\+Count}} (\$time\+Range)
\begin{DoxyCompactList}\small\item\em Obtiene el número total de hongos en la base de datos. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_a35b229bcab9985c40a2c2b2a26d8b774}{get\+User\+Activity\+Stats}} (\$time\+Range)
\begin{DoxyCompactList}\small\item\em Obtiene estadísticas sobre la actividad de los usuarios. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Atributos privados}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_acd274f9dac4bd8fb0b90261c3d971abd}{\$db}}
\end{DoxyCompactItemize}


\doxysubsection{Descripción detallada}
Controlador para generar estadísticas de hongos. 

Esta clase proporciona métodos para recuperar diferentes tipos de estadísticas relacionadas con los hongos en la base de datos. 

Definición en la línea \mbox{\hyperlink{StatsController_8php_source_l00014}{14}} del archivo \mbox{\hyperlink{StatsController_8php_source}{Stats\+Controller.\+php}}.



\doxysubsection{Documentación de constructores y destructores}
\Hypertarget{classApp_1_1Controllers_1_1StatsController_aa29167da3f341e9199c640b102e5fc97}\label{classApp_1_1Controllers_1_1StatsController_aa29167da3f341e9199c640b102e5fc97} 
\index{App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}!\_\_construct@{\_\_construct}}
\index{\_\_construct@{\_\_construct}!App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}}
\doxysubsubsection{\texorpdfstring{\_\_construct()}{\_\_construct()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\+::\+\_\+\+\_\+construct (\begin{DoxyParamCaption}\item[{}]{\$db }\end{DoxyParamCaption})}



Constructor del controlador de estadísticas. 


\begin{DoxyParams}[1]{Parámetros}
\textbackslash{}\+PDO & {\em \$db} & Instancia de la conexión a la base de datos \\
\hline
\end{DoxyParams}


Definición en la línea \mbox{\hyperlink{StatsController_8php_source_l00026}{26}} del archivo \mbox{\hyperlink{StatsController_8php_source}{Stats\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00027\ \ \ \ \ \{}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \$this-\/>db\ =\ \mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_acd274f9dac4bd8fb0b90261c3d971abd}{\$db}};}
\DoxyCodeLine{00029\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{StatsController_8php_source_l00019}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}\$db}}.



\doxysubsection{Documentación de funciones miembro}
\Hypertarget{classApp_1_1Controllers_1_1StatsController_ab34ffd8a338bf1ef2251c21a3ef00dac}\label{classApp_1_1Controllers_1_1StatsController_ab34ffd8a338bf1ef2251c21a3ef00dac} 
\index{App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}!getAdditionTrends@{getAdditionTrends}}
\index{getAdditionTrends@{getAdditionTrends}!App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}}
\doxysubsubsection{\texorpdfstring{getAdditionTrends()}{getAdditionTrends()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\+::get\+Addition\+Trends (\begin{DoxyParamCaption}\item[{}]{\$time\+Range = {\ttfamily \textquotesingle{}year\textquotesingle{}} }\end{DoxyParamCaption})}



Obtiene las tendencias de adición de hongos en diferentes períodos. 


\begin{DoxyParams}[1]{Parámetros}
string & {\em \$time\+Range} & Período de tiempo para filtrar resultados \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Datos de tendencias de adición agrupados por período 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{StatsController_8php_source_l00302}{302}} del archivo \mbox{\hyperlink{StatsController_8php_source}{Stats\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00303\ \ \ \ \ \{}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \$groupFormat\ =\ \$timeRange\ ===\ \textcolor{stringliteral}{'week'}\ ||\ \$timeRange\ ===\ \textcolor{stringliteral}{'month'}\ ?\ \textcolor{stringliteral}{'\%Y-\/\%m-\/\%d'}\ :\ \textcolor{stringliteral}{'\%Y-\/\%m'};}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \$interval\ =\ \$timeRange\ ===\ \textcolor{stringliteral}{'week'}\ ?\ \textcolor{stringliteral}{'7\ DAY'}\ :\ (\$timeRange\ ===\ \textcolor{stringliteral}{'month'}\ ?\ \textcolor{stringliteral}{'30\ DAY'}\ :\ \textcolor{stringliteral}{'365\ DAY'});}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ \$result\ =\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}SELECT\ DATE\_FORMAT(date\_added,\ '\$groupFormat')\ as\ period,\ }}
\DoxyCodeLine{00310\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ COUNT(*)\ as\ count}}
\DoxyCodeLine{00311\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FROM\ fungi\ }}
\DoxyCodeLine{00312\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WHERE\ date\_added\ >=\ DATE\_SUB(NOW(),\ INTERVAL\ \$interval)}}
\DoxyCodeLine{00313\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GROUP\ BY\ period}}
\DoxyCodeLine{00314\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ORDER\ BY\ date\_added\ ASC"{}}}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$result\ ===\ \textcolor{keyword}{false})\ \{}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}Error\ al\ obtener\ tendencias\ de\ adición:\ Consulta\ fallida"{}});}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [];}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$result-\/>fetchAll(\(\backslash\)PDO::FETCH\_ASSOC);}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\(\backslash\)Exception\ \$e)\ \{}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}Error\ al\ obtener\ tendencias\ de\ adición:\ "{}}\ .\ \$e-\/>getMessage());}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [];}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00327\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Controllers_1_1StatsController_af2a1c7f7fb5c2ec3ddc6a82c7c9b5944}\label{classApp_1_1Controllers_1_1StatsController_af2a1c7f7fb5c2ec3ddc6a82c7c9b5944} 
\index{App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}!getAllStatsForPage@{getAllStatsForPage}}
\index{getAllStatsForPage@{getAllStatsForPage}!App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}}
\doxysubsubsection{\texorpdfstring{getAllStatsForPage()}{getAllStatsForPage()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\+::get\+All\+Stats\+For\+Page (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Obtiene todas las estadísticas necesarias para la página de estadísticas. 

\begin{DoxyReturn}{Devuelve}
array Todas las estadísticas formateadas para la plantilla 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{StatsController_8php_source_l00488}{488}} del archivo \mbox{\hyperlink{StatsController_8php_source}{Stats\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00489\ \ \ \ \ \{}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Obtener\ conteo\ total\ de\ hongos}}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \$totalFungi\ =\ \$this-\/>db-\/>query(\textcolor{stringliteral}{"{}SELECT\ COUNT(*)\ as\ total\ FROM\ fungi"{}})-\/>fetch()[\textcolor{stringliteral}{'total'}]\ ??\ 0;}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Obtener\ estadísticas\ de\ comestibilidad\ y\ formatearlas}}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ \$edibilityStats\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_a339d384906766d15e008dbfda50a2ca8}{getEdibilityStats}}();}
\DoxyCodeLine{00495\ \ \ \ \ \ \ \ \ \$edibilityFormatted\ =\ [}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'edible\_fungi'}\ =>\ 0,}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'non\_edible\_fungi'}\ =>\ 0,}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'toxic\_fungi'}\ =>\ 0,}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'unknown\_edibility\_fungi'}\ =>\ 0}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ ];}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{foreach}\ (\$edibilityStats\ as\ \$stat)\ \{}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$stat[\textcolor{stringliteral}{'edibility'}]\ ===\ \textcolor{stringliteral}{'edible'})\ \$edibilityFormatted[\textcolor{stringliteral}{'edible\_fungi'}]\ =\ \$stat[\textcolor{stringliteral}{'count'}];}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$stat[\textcolor{stringliteral}{'edibility'}]\ ===\ \textcolor{stringliteral}{'non\_edible'})\ \$edibilityFormatted[\textcolor{stringliteral}{'non\_edible\_fungi'}]\ =\ \$stat[\textcolor{stringliteral}{'count'}];}
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$stat[\textcolor{stringliteral}{'edibility'}]\ ===\ \textcolor{stringliteral}{'toxic'})\ \$edibilityFormatted[\textcolor{stringliteral}{'toxic\_fungi'}]\ =\ \$stat[\textcolor{stringliteral}{'count'}];}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$stat[\textcolor{stringliteral}{'edibility'}]\ ===\ \textcolor{stringliteral}{'unknown'})\ \$edibilityFormatted[\textcolor{stringliteral}{'unknown\_edibility\_fungi'}]\ =\ \$stat[\textcolor{stringliteral}{'count'}];}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00509\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Combinar\ todos\ los\ datos\ para\ la\ plantilla}}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ array\_merge(\$edibilityFormatted,\ [}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'total\_fungi'}\ =>\ \$totalFungi,}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'total\_users'}\ =>\ \$this-\/>db-\/>query(\textcolor{stringliteral}{"{}SELECT\ COUNT(*)\ as\ total\ FROM\ users"{}})-\/>fetch()[\textcolor{stringliteral}{'total'}]\ ??\ 0,}
\DoxyCodeLine{00513\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'top\_families'}\ =>\ \$this-\/>getTopFamilies(10),}
\DoxyCodeLine{00514\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'most\_viewed'}\ =>\ \$this-\/>getMostViewedFungi(5),}
\DoxyCodeLine{00515\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'top\_favorites'}\ =>\ \$this-\/>getTopFavorites(5),}
\DoxyCodeLine{00516\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'top\_liked'}\ =>\ \$this-\/>getTopLiked(5),}
\DoxyCodeLine{00517\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'trends'}\ =>\ \$this-\/>getAdditionTrends(),}
\DoxyCodeLine{00518\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'habitats'}\ =>\ \$this-\/>getHabitatDistribution()}
\DoxyCodeLine{00519\ \ \ \ \ \ \ \ \ ]);}
\DoxyCodeLine{00520\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{StatsController_8php_source_l00078}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Edibility\+Stats()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1StatsController_af2a1c7f7fb5c2ec3ddc6a82c7c9b5944_cgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1StatsController_a19103b3b40588b307b330f1b37e408d8}\label{classApp_1_1Controllers_1_1StatsController_a19103b3b40588b307b330f1b37e408d8} 
\index{App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}!getClassStats@{getClassStats}}
\index{getClassStats@{getClassStats}!App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}}
\doxysubsubsection{\texorpdfstring{getClassStats()}{getClassStats()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\+::get\+Class\+Stats (\begin{DoxyParamCaption}\item[{}]{\$time\+Range }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Obtiene estadísticas sobre las clases taxonómicas de hongos. 


\begin{DoxyParams}[1]{Parámetros}
string & {\em \$time\+Range} & Período de tiempo para filtrar los resultados \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Las 10 clases más comunes con sus recuentos 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{StatsController_8php_source_l00171}{171}} del archivo \mbox{\hyperlink{StatsController_8php_source}{Stats\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00172\ \ \ \ \ \{}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \$timeCondition\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_acbcc9cd24df7ea83bb72e818e3cf4ebe}{getTimeRangeCondition}}(\$timeRange);}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}SELECT\ class,\ COUNT(*)\ as\ count\ }}
\DoxyCodeLine{00176\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ FROM\ taxonomy\ }}
\DoxyCodeLine{00177\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ WHERE\ class\ IS\ NOT\ NULL\ }}
\DoxyCodeLine{00178\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ GROUP\ BY\ class\ }}
\DoxyCodeLine{00179\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ ORDER\ BY\ count\ DESC\ }}
\DoxyCodeLine{00180\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ LIMIT\ 10"{}},}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ []}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ )-\/>fetchAll(\(\backslash\)PDO::FETCH\_ASSOC);}
\DoxyCodeLine{00183\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{StatsController_8php_source_l00055}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Time\+Range\+Condition()}}.



Referenciado por \mbox{\hyperlink{StatsController_8php_source_l00037}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Fungi\+Stats()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1StatsController_a19103b3b40588b307b330f1b37e408d8_cgraph}
\end{center}
\end{figure}
Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1StatsController_a19103b3b40588b307b330f1b37e408d8_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1StatsController_a23b681a8cc748f3cfeff24da0e6d8e34}\label{classApp_1_1Controllers_1_1StatsController_a23b681a8cc748f3cfeff24da0e6d8e34} 
\index{App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}!getDashboardStats@{getDashboardStats}}
\index{getDashboardStats@{getDashboardStats}!App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}}
\doxysubsubsection{\texorpdfstring{getDashboardStats()}{getDashboardStats()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\+::get\+Dashboard\+Stats (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Obtiene todas las estadísticas necesarias para el panel de administración. 

\begin{DoxyReturn}{Devuelve}
array Datos del dashboard formateados para la plantilla 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{StatsController_8php_source_l00527}{527}} del archivo \mbox{\hyperlink{StatsController_8php_source}{Stats\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00528\ \ \ \ \ \{}
\DoxyCodeLine{00529\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Obtener\ actividad\ reciente\ de\ usuarios\ desde\ la\ base\ de\ datos}}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ \$queryResult\ =\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00531\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}SELECT\ u.username,\ a.action,\ a.item,\ a.access\_time\ as\ date\ }}
\DoxyCodeLine{00532\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ FROM\ access\_logs\ a}}
\DoxyCodeLine{00533\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ JOIN\ users\ u\ ON\ a.user\_id\ =\ u.id}}
\DoxyCodeLine{00534\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ ORDER\ BY\ a.access\_time\ DESC}}
\DoxyCodeLine{00535\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ LIMIT\ 10"{}}}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \$recentActivity\ =\ \$queryResult\ ?\ \$queryResult-\/>fetchAll(\(\backslash\)PDO::FETCH\_ASSOC)\ :\ [];}
\DoxyCodeLine{00538\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Obtener\ estadísticas\ generales}}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \$fungiStats\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_a944a68a075295dfdc85e7e403b469358}{getFungiStats}}(\textcolor{stringliteral}{'all'});}
\DoxyCodeLine{00541\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [}
\DoxyCodeLine{00543\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'total\_fungi'}\ =>\ \$this-\/>db-\/>query(\textcolor{stringliteral}{"{}SELECT\ COUNT(*)\ as\ total\ FROM\ fungi"{}})-\/>fetch()[\textcolor{stringliteral}{'total'}]\ ??\ 0,}
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'total\_users'}\ =>\ \$this-\/>db-\/>query(\textcolor{stringliteral}{"{}SELECT\ COUNT(*)\ as\ total\ FROM\ users"{}})-\/>fetch()[\textcolor{stringliteral}{'total'}]\ ??\ 0,}
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'recent\_activity'}\ =>\ \$recentActivity,}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'popular\_fungi'}\ =>\ \$fungiStats[\textcolor{stringliteral}{'popular'}]\ ??\ [],}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'edibility\_stats'}\ =>\ \$fungiStats[\textcolor{stringliteral}{'edibility'}]\ ??\ [],}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'family\_stats'}\ =>\ \$fungiStats[\textcolor{stringliteral}{'families'}]\ ??\ []}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ ];}
\DoxyCodeLine{00550\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{StatsController_8php_source_l00037}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Fungi\+Stats()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1StatsController_a23b681a8cc748f3cfeff24da0e6d8e34_cgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1StatsController_a42b7befe748ebafdfaf9a1e1669b6a4a}\label{classApp_1_1Controllers_1_1StatsController_a42b7befe748ebafdfaf9a1e1669b6a4a} 
\index{App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}!getDivisionStats@{getDivisionStats}}
\index{getDivisionStats@{getDivisionStats}!App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}}
\doxysubsubsection{\texorpdfstring{getDivisionStats()}{getDivisionStats()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\+::get\+Division\+Stats (\begin{DoxyParamCaption}\item[{}]{\$time\+Range }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Obtiene estadísticas sobre las divisiones taxonómicas de hongos. 


\begin{DoxyParams}[1]{Parámetros}
string & {\em \$time\+Range} & Período de tiempo para filtrar los resultados \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Datos de divisiones agrupados y contados 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{StatsController_8php_source_l00152}{152}} del archivo \mbox{\hyperlink{StatsController_8php_source}{Stats\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00153\ \ \ \ \ \{}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \$timeCondition\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_acbcc9cd24df7ea83bb72e818e3cf4ebe}{getTimeRangeCondition}}(\$timeRange);}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}SELECT\ division,\ COUNT(*)\ as\ count\ }}
\DoxyCodeLine{00157\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ FROM\ taxonomy\ }}
\DoxyCodeLine{00158\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ WHERE\ division\ IS\ NOT\ NULL\ }}
\DoxyCodeLine{00159\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ GROUP\ BY\ division\ }}
\DoxyCodeLine{00160\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ ORDER\ BY\ count\ DESC"{}},}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ []}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ )-\/>fetchAll(\(\backslash\)PDO::FETCH\_ASSOC);}
\DoxyCodeLine{00163\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{StatsController_8php_source_l00055}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Time\+Range\+Condition()}}.



Referenciado por \mbox{\hyperlink{StatsController_8php_source_l00037}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Fungi\+Stats()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1StatsController_a42b7befe748ebafdfaf9a1e1669b6a4a_cgraph}
\end{center}
\end{figure}
Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1StatsController_a42b7befe748ebafdfaf9a1e1669b6a4a_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1StatsController_a339d384906766d15e008dbfda50a2ca8}\label{classApp_1_1Controllers_1_1StatsController_a339d384906766d15e008dbfda50a2ca8} 
\index{App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}!getEdibilityStats@{getEdibilityStats}}
\index{getEdibilityStats@{getEdibilityStats}!App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}}
\doxysubsubsection{\texorpdfstring{getEdibilityStats()}{getEdibilityStats()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\+::get\+Edibility\+Stats (\begin{DoxyParamCaption}\item[{}]{\$time\+Range = {\ttfamily \textquotesingle{}all\textquotesingle{}} }\end{DoxyParamCaption})}



Obtiene estadísticas de comestibilidad de hongos. 


\begin{DoxyParams}[1]{Parámetros}
string & {\em \$time\+Range} & Período de tiempo para filtrar los resultados \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Estadísticas de comestibilidad 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{StatsController_8php_source_l00078}{78}} del archivo \mbox{\hyperlink{StatsController_8php_source}{Stats\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00079\ \ \ \ \ \{}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \$timeCondition\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_acbcc9cd24df7ea83bb72e818e3cf4ebe}{getTimeRangeCondition}}(\$timeRange);}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \$result\ =\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}SELECT\ edibility,\ COUNT(*)\ as\ count}}
\DoxyCodeLine{00085\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FROM\ fungi}}
\DoxyCodeLine{00086\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$timeCondition}}
\DoxyCodeLine{00087\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GROUP\ BY\ edibility}}
\DoxyCodeLine{00088\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ORDER\ BY\ count\ DESC"{}},}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ []}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$result\ ===\ \textcolor{keyword}{false})\ \{}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}Error\ al\ obtener\ estadísticas\ de\ comestibilidad:\ Consulta\ fallida"{}});}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [];}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$result-\/>fetchAll(\(\backslash\)PDO::FETCH\_ASSOC);}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\(\backslash\)Exception\ \$e)\ \{}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}Error\ al\ obtener\ estadísticas\ de\ comestibilidad:\ "{}}\ .\ \$e-\/>getMessage());}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [];}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00102\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{StatsController_8php_source_l00055}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Time\+Range\+Condition()}}.



Referenciado por \mbox{\hyperlink{StatsController_8php_source_l00488}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+All\+Stats\+For\+Page()}}, \mbox{\hyperlink{StatsController_8php_source_l00037}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Fungi\+Stats()}} y \mbox{\hyperlink{StatsController_8php_source_l00237}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+General\+Stats()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1StatsController_a339d384906766d15e008dbfda50a2ca8_cgraph}
\end{center}
\end{figure}
Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1StatsController_a339d384906766d15e008dbfda50a2ca8_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1StatsController_a9e0cdd48bfd132bccade19031dca3c25}\label{classApp_1_1Controllers_1_1StatsController_a9e0cdd48bfd132bccade19031dca3c25} 
\index{App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}!getFamilyStats@{getFamilyStats}}
\index{getFamilyStats@{getFamilyStats}!App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}}
\doxysubsubsection{\texorpdfstring{getFamilyStats()}{getFamilyStats()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\+::get\+Family\+Stats (\begin{DoxyParamCaption}\item[{}]{\$time\+Range }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Obtiene estadísticas sobre las familias de hongos más comunes. 


\begin{DoxyParams}[1]{Parámetros}
string & {\em \$time\+Range} & Período de tiempo para filtrar los resultados \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Las 10 familias de hongos más comunes con sus recuentos 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{StatsController_8php_source_l00110}{110}} del archivo \mbox{\hyperlink{StatsController_8php_source}{Stats\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00111\ \ \ \ \ \{}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \$timeCondition\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_acbcc9cd24df7ea83bb72e818e3cf4ebe}{getTimeRangeCondition}}(\$timeRange);}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}SELECT\ t.family,\ COUNT(*)\ as\ count\ }}
\DoxyCodeLine{00115\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ FROM\ taxonomy\ t}}
\DoxyCodeLine{00116\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ JOIN\ fungi\ f\ ON\ f.id\ =\ t.fungi\_id}}
\DoxyCodeLine{00117\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \$timeCondition}}
\DoxyCodeLine{00118\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ WHERE\ t.family\ IS\ NOT\ NULL\ }}
\DoxyCodeLine{00119\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ GROUP\ BY\ t.family\ }}
\DoxyCodeLine{00120\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ ORDER\ BY\ count\ DESC\ }}
\DoxyCodeLine{00121\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ LIMIT\ 10"{}},}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ []}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ )-\/>fetchAll(\(\backslash\)PDO::FETCH\_ASSOC);}
\DoxyCodeLine{00124\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{StatsController_8php_source_l00055}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Time\+Range\+Condition()}}.



Referenciado por \mbox{\hyperlink{StatsController_8php_source_l00037}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Fungi\+Stats()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1StatsController_a9e0cdd48bfd132bccade19031dca3c25_cgraph}
\end{center}
\end{figure}
Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1StatsController_a9e0cdd48bfd132bccade19031dca3c25_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1StatsController_a944a68a075295dfdc85e7e403b469358}\label{classApp_1_1Controllers_1_1StatsController_a944a68a075295dfdc85e7e403b469358} 
\index{App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}!getFungiStats@{getFungiStats}}
\index{getFungiStats@{getFungiStats}!App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}}
\doxysubsubsection{\texorpdfstring{getFungiStats()}{getFungiStats()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\+::get\+Fungi\+Stats (\begin{DoxyParamCaption}\item[{}]{\$time\+Range = {\ttfamily \textquotesingle{}all\textquotesingle{}} }\end{DoxyParamCaption})}



Obtiene todas las estadísticas relacionadas con hongos. 


\begin{DoxyParams}[1]{Parámetros}
string & {\em \$time\+Range} & Período de tiempo para las estadísticas (\textquotesingle{}all\textquotesingle{}, \textquotesingle{}week\textquotesingle{}, \textquotesingle{}month\textquotesingle{}, \textquotesingle{}year\textquotesingle{}) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Conjunto completo de estadísticas organizadas por categorías 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{StatsController_8php_source_l00037}{37}} del archivo \mbox{\hyperlink{StatsController_8php_source}{Stats\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00038\ \ \ \ \ \{}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'edibility'}\ =>\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_a339d384906766d15e008dbfda50a2ca8}{getEdibilityStats}}(\$timeRange),}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'families'}\ =>\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_a9e0cdd48bfd132bccade19031dca3c25}{getFamilyStats}}(\$timeRange),}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'popular'}\ =>\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_a9e81a77bff8dcf7481dbc58a4265ebe8}{getPopularFungi}}(\$timeRange),}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'divisions'}\ =>\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_a42b7befe748ebafdfaf9a1e1669b6a4a}{getDivisionStats}}(\$timeRange),}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'classes'}\ =>\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_a19103b3b40588b307b330f1b37e408d8}{getClassStats}}(\$timeRange),}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'orders'}\ =>\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_a2ff7db3ac8f173dbccfbbb9d61b9412f}{getOrderStats}}(\$timeRange),}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ ];}
\DoxyCodeLine{00047\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{StatsController_8php_source_l00171}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Class\+Stats()}}, \mbox{\hyperlink{StatsController_8php_source_l00152}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Division\+Stats()}}, \mbox{\hyperlink{StatsController_8php_source_l00078}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Edibility\+Stats()}}, \mbox{\hyperlink{StatsController_8php_source_l00110}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Family\+Stats()}}, \mbox{\hyperlink{StatsController_8php_source_l00191}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Order\+Stats()}} y \mbox{\hyperlink{StatsController_8php_source_l00132}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Popular\+Fungi()}}.



Referenciado por \mbox{\hyperlink{StatsController_8php_source_l00527}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Dashboard\+Stats()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1StatsController_a944a68a075295dfdc85e7e403b469358_cgraph}
\end{center}
\end{figure}
Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1StatsController_a944a68a075295dfdc85e7e403b469358_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1StatsController_a6c42f9fa6d2e3d47cd1910b324b710a3}\label{classApp_1_1Controllers_1_1StatsController_a6c42f9fa6d2e3d47cd1910b324b710a3} 
\index{App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}!getGeneralStats@{getGeneralStats}}
\index{getGeneralStats@{getGeneralStats}!App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}}
\doxysubsubsection{\texorpdfstring{getGeneralStats()}{getGeneralStats()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\+::get\+General\+Stats (\begin{DoxyParamCaption}\item[{}]{\$time\+Range = {\ttfamily \textquotesingle{}all\textquotesingle{}} }\end{DoxyParamCaption})}



Obtiene estadísticas generales sobre los hongos en la base de datos. 


\begin{DoxyParams}[1]{Parámetros}
string & {\em \$time\+Range} & Período de tiempo para filtrar los resultados \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Estadísticas generales sobre los hongos 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{StatsController_8php_source_l00237}{237}} del archivo \mbox{\hyperlink{StatsController_8php_source}{Stats\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00238\ \ \ \ \ \{}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Aquí\ puedes\ agregar\ estadísticas\ adicionales\ que\ necesites}}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'total\_count'}\ =>\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_aa6d98d1284d05b3772442f189f643a88}{getTotalFungiCount}}(\$timeRange),}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'edibility\_summary'}\ =>\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_a339d384906766d15e008dbfda50a2ca8}{getEdibilityStats}}(\$timeRange),}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'recent\_additions'}\ =>\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_acbbde5b1dcd9bfac461c687cc57236c7}{getRecentAdditions}}(\$timeRange),}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ ];}
\DoxyCodeLine{00245\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{StatsController_8php_source_l00078}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Edibility\+Stats()}}, \mbox{\hyperlink{StatsController_8php_source_l00271}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Recent\+Additions()}} y \mbox{\hyperlink{StatsController_8php_source_l00253}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Total\+Fungi\+Count()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1StatsController_a6c42f9fa6d2e3d47cd1910b324b710a3_cgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1StatsController_adbb5bc3855f90767c23682879866eb94}\label{classApp_1_1Controllers_1_1StatsController_adbb5bc3855f90767c23682879866eb94} 
\index{App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}!getHabitatDistribution@{getHabitatDistribution}}
\index{getHabitatDistribution@{getHabitatDistribution}!App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}}
\doxysubsubsection{\texorpdfstring{getHabitatDistribution()}{getHabitatDistribution()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\+::get\+Habitat\+Distribution (\begin{DoxyParamCaption}\item[{}]{\$limit = {\ttfamily 10} }\end{DoxyParamCaption})}



Obtiene la distribución de hongos por hábitat. 


\begin{DoxyParams}[1]{Parámetros}
int & {\em \$limit} & Número máximo de resultados a retornar \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Distribución de hongos por hábitat 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{StatsController_8php_source_l00459}{459}} del archivo \mbox{\hyperlink{StatsController_8php_source}{Stats\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00460\ \ \ \ \ \{}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ \ \ \ \ \$result\ =\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}SELECT\ habitat\ as\ name,\ COUNT(*)\ as\ count}}
\DoxyCodeLine{00464\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FROM\ fungi}}
\DoxyCodeLine{00465\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WHERE\ habitat\ IS\ NOT\ NULL\ AND\ habitat\ !=\ ''}}
\DoxyCodeLine{00466\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GROUP\ BY\ habitat}}
\DoxyCodeLine{00467\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ORDER\ BY\ count\ DESC}}
\DoxyCodeLine{00468\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ LIMIT\ \$limit"{}}}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$result\ ===\ \textcolor{keyword}{false})\ \{}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}Error\ al\ obtener\ distribución\ por\ hábitat:\ Consulta\ fallida"{}});}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [];}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00476\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$result-\/>fetchAll(\(\backslash\)PDO::FETCH\_ASSOC);}
\DoxyCodeLine{00477\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\(\backslash\)Exception\ \$e)\ \{}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}Error\ al\ obtener\ distribución\ por\ hábitat:\ "{}}\ .\ \$e-\/>getMessage());}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [];}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00481\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Controllers_1_1StatsController_afe5d0d166fdfb1ca6e957a673a2e9e47}\label{classApp_1_1Controllers_1_1StatsController_afe5d0d166fdfb1ca6e957a673a2e9e47} 
\index{App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}!getMostViewedFungi@{getMostViewedFungi}}
\index{getMostViewedFungi@{getMostViewedFungi}!App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}}
\doxysubsubsection{\texorpdfstring{getMostViewedFungi()}{getMostViewedFungi()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\+::get\+Most\+Viewed\+Fungi (\begin{DoxyParamCaption}\item[{}]{\$limit = {\ttfamily 5} }\end{DoxyParamCaption})}



Obtiene los hongos más visitados. 


\begin{DoxyParams}[1]{Parámetros}
int & {\em \$limit} & Número máximo de resultados a retornar \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Los hongos más visitados con sus contadores 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{StatsController_8php_source_l00370}{370}} del archivo \mbox{\hyperlink{StatsController_8php_source}{Stats\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00371\ \ \ \ \ \{}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \ \ \ \ \$result\ =\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}SELECT\ f.id,\ f.name,\ f.view\_count\ as\ views}}
\DoxyCodeLine{00375\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FROM\ fungi\ f}}
\DoxyCodeLine{00376\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WHERE\ f.view\_count\ >\ 0}}
\DoxyCodeLine{00377\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ORDER\ BY\ f.view\_count\ DESC}}
\DoxyCodeLine{00378\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ LIMIT\ \$limit"{}}}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$result\ ===\ \textcolor{keyword}{false})\ \{}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}Error\ al\ obtener\ hongos\ más\ vistos:\ Consulta\ fallida"{}});}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [];}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$result-\/>fetchAll(\(\backslash\)PDO::FETCH\_ASSOC);}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\(\backslash\)Exception\ \$e)\ \{}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}Error\ al\ obtener\ hongos\ más\ vistos:\ "{}}\ .\ \$e-\/>getMessage());}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [];}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00391\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Controllers_1_1StatsController_a2ff7db3ac8f173dbccfbbb9d61b9412f}\label{classApp_1_1Controllers_1_1StatsController_a2ff7db3ac8f173dbccfbbb9d61b9412f} 
\index{App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}!getOrderStats@{getOrderStats}}
\index{getOrderStats@{getOrderStats}!App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}}
\doxysubsubsection{\texorpdfstring{getOrderStats()}{getOrderStats()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\+::get\+Order\+Stats (\begin{DoxyParamCaption}\item[{}]{\$time\+Range }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Obtiene estadísticas sobre los órdenes taxonómicos de hongos. 


\begin{DoxyParams}[1]{Parámetros}
string & {\em \$time\+Range} & Período de tiempo para filtrar los resultados \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Los 10 órdenes más comunes con sus recuentos 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{StatsController_8php_source_l00191}{191}} del archivo \mbox{\hyperlink{StatsController_8php_source}{Stats\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00192\ \ \ \ \ \{}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \$timeCondition\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_acbcc9cd24df7ea83bb72e818e3cf4ebe}{getTimeRangeCondition}}(\$timeRange);}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}SELECT\ ordo,\ COUNT(*)\ as\ count\ }}
\DoxyCodeLine{00196\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ FROM\ taxonomy\ }}
\DoxyCodeLine{00197\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ WHERE\ ordo\ IS\ NOT\ NULL\ }}
\DoxyCodeLine{00198\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ GROUP\ BY\ ordo\ }}
\DoxyCodeLine{00199\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ ORDER\ BY\ count\ DESC\ }}
\DoxyCodeLine{00200\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ LIMIT\ 10"{}},}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ []}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ )-\/>fetchAll(\(\backslash\)PDO::FETCH\_ASSOC);}
\DoxyCodeLine{00203\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{StatsController_8php_source_l00055}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Time\+Range\+Condition()}}.



Referenciado por \mbox{\hyperlink{StatsController_8php_source_l00037}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Fungi\+Stats()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1StatsController_a2ff7db3ac8f173dbccfbbb9d61b9412f_cgraph}
\end{center}
\end{figure}
Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1StatsController_a2ff7db3ac8f173dbccfbbb9d61b9412f_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1StatsController_a9e81a77bff8dcf7481dbc58a4265ebe8}\label{classApp_1_1Controllers_1_1StatsController_a9e81a77bff8dcf7481dbc58a4265ebe8} 
\index{App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}!getPopularFungi@{getPopularFungi}}
\index{getPopularFungi@{getPopularFungi}!App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}}
\doxysubsubsection{\texorpdfstring{getPopularFungi()}{getPopularFungi()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\+::get\+Popular\+Fungi (\begin{DoxyParamCaption}\item[{}]{\$time\+Range }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Obtiene los hongos más populares basados en vistas. 


\begin{DoxyParams}[1]{Parámetros}
string & {\em \$time\+Range} & Período de tiempo para filtrar los resultados \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Los 10 hongos más vistos con sus contadores de vistas 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{StatsController_8php_source_l00132}{132}} del archivo \mbox{\hyperlink{StatsController_8php_source}{Stats\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00133\ \ \ \ \ \{}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \$timeCondition\ =\ str\_replace(\textcolor{stringliteral}{'created\_at'},\ \textcolor{stringliteral}{'fp.last\_view'},\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_acbcc9cd24df7ea83bb72e818e3cf4ebe}{getTimeRangeCondition}}(\$timeRange));}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}SELECT\ f.name,\ fp.views\ }}
\DoxyCodeLine{00137\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ FROM\ fungi\ f\ }}
\DoxyCodeLine{00138\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ JOIN\ fungi\_popularity\ fp\ ON\ f.id\ =\ fp.fungi\_id\ }}
\DoxyCodeLine{00139\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \$timeCondition}}
\DoxyCodeLine{00140\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ ORDER\ BY\ fp.views\ DESC\ }}
\DoxyCodeLine{00141\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ LIMIT\ 10"{}},}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ []}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ )-\/>fetchAll(\(\backslash\)PDO::FETCH\_ASSOC);}
\DoxyCodeLine{00144\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{StatsController_8php_source_l00055}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Time\+Range\+Condition()}}.



Referenciado por \mbox{\hyperlink{StatsController_8php_source_l00037}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Fungi\+Stats()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1StatsController_a9e81a77bff8dcf7481dbc58a4265ebe8_cgraph}
\end{center}
\end{figure}
Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1StatsController_a9e81a77bff8dcf7481dbc58a4265ebe8_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1StatsController_acbbde5b1dcd9bfac461c687cc57236c7}\label{classApp_1_1Controllers_1_1StatsController_acbbde5b1dcd9bfac461c687cc57236c7} 
\index{App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}!getRecentAdditions@{getRecentAdditions}}
\index{getRecentAdditions@{getRecentAdditions}!App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}}
\doxysubsubsection{\texorpdfstring{getRecentAdditions()}{getRecentAdditions()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\+::get\+Recent\+Additions (\begin{DoxyParamCaption}\item[{}]{\$time\+Range }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Obtiene los hongos añadidos recientemente. 


\begin{DoxyParams}[1]{Parámetros}
string & {\em \$time\+Range} & Período de tiempo para filtrar los resultados \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Los 5 hongos más recientes 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{StatsController_8php_source_l00271}{271}} del archivo \mbox{\hyperlink{StatsController_8php_source}{Stats\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00272\ \ \ \ \ \{}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \$timeCondition\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_acbcc9cd24df7ea83bb72e818e3cf4ebe}{getTimeRangeCondition}}(\$timeRange);}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \$result\ =\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}SELECT\ id,\ name,\ date\_added\ as\ created\_at}}
\DoxyCodeLine{00278\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FROM\ fungi\ }}
\DoxyCodeLine{00279\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$timeCondition}}
\DoxyCodeLine{00280\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ORDER\ BY\ date\_added\ DESC\ }}
\DoxyCodeLine{00281\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ LIMIT\ 5"{}}}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$result\ ===\ \textcolor{keyword}{false})\ \{}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}Error\ al\ obtener\ hongos\ recientes:\ Consulta\ fallida"{}});}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [];}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$result-\/>fetchAll(\(\backslash\)PDO::FETCH\_ASSOC);}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\(\backslash\)Exception\ \$e)\ \{}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}Error\ al\ obtener\ hongos\ recientes:\ "{}}\ .\ \$e-\/>getMessage());}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [];}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00294\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{StatsController_8php_source_l00055}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Time\+Range\+Condition()}}.



Referenciado por \mbox{\hyperlink{StatsController_8php_source_l00237}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+General\+Stats()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1StatsController_acbbde5b1dcd9bfac461c687cc57236c7_cgraph}
\end{center}
\end{figure}
Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1StatsController_acbbde5b1dcd9bfac461c687cc57236c7_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1StatsController_acbcc9cd24df7ea83bb72e818e3cf4ebe}\label{classApp_1_1Controllers_1_1StatsController_acbcc9cd24df7ea83bb72e818e3cf4ebe} 
\index{App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}!getTimeRangeCondition@{getTimeRangeCondition}}
\index{getTimeRangeCondition@{getTimeRangeCondition}!App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}}
\doxysubsubsection{\texorpdfstring{getTimeRangeCondition()}{getTimeRangeCondition()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\+::get\+Time\+Range\+Condition (\begin{DoxyParamCaption}\item[{}]{\$time\+Range }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Genera la condición SQL para filtrar por rango de tiempo. 


\begin{DoxyParams}[1]{Parámetros}
string & {\em \$time\+Range} & Rango de tiempo (all, week, month, year) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
string Condición SQL para la consulta 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{StatsController_8php_source_l00055}{55}} del archivo \mbox{\hyperlink{StatsController_8php_source}{Stats\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00056\ \ \ \ \ \{}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$timeRange\ ===\ \textcolor{stringliteral}{'all'})\ \{}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{''};}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \$interval\ =\ \textcolor{stringliteral}{''};}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}(\$timeRange)\ \{}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{stringliteral}{'week'}:\ \$interval\ =\ \textcolor{stringliteral}{'7\ DAY'};\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{stringliteral}{'month'}:\ \$interval\ =\ \textcolor{stringliteral}{'30\ DAY'};\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{stringliteral}{'year'}:\ \$interval\ =\ \textcolor{stringliteral}{'365\ DAY'};\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:\ \$interval\ =\ \textcolor{stringliteral}{'0\ DAY'};}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}WHERE\ created\_at\ >=\ DATE\_SUB(NOW(),\ INTERVAL\ \$interval)"{}};}
\DoxyCodeLine{00070\ \ \ \ \ \}}

\end{DoxyCode}


Referenciado por \mbox{\hyperlink{StatsController_8php_source_l00171}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Class\+Stats()}}, \mbox{\hyperlink{StatsController_8php_source_l00152}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Division\+Stats()}}, \mbox{\hyperlink{StatsController_8php_source_l00078}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Edibility\+Stats()}}, \mbox{\hyperlink{StatsController_8php_source_l00110}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Family\+Stats()}}, \mbox{\hyperlink{StatsController_8php_source_l00191}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Order\+Stats()}}, \mbox{\hyperlink{StatsController_8php_source_l00132}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Popular\+Fungi()}}, \mbox{\hyperlink{StatsController_8php_source_l00271}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Recent\+Additions()}}, \mbox{\hyperlink{StatsController_8php_source_l00336}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Top\+Families()}} y \mbox{\hyperlink{StatsController_8php_source_l00253}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Total\+Fungi\+Count()}}.

Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1StatsController_acbcc9cd24df7ea83bb72e818e3cf4ebe_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1StatsController_abaa9ec5f3cfb54693308bfb1ec304163}\label{classApp_1_1Controllers_1_1StatsController_abaa9ec5f3cfb54693308bfb1ec304163} 
\index{App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}!getTopFamilies@{getTopFamilies}}
\index{getTopFamilies@{getTopFamilies}!App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}}
\doxysubsubsection{\texorpdfstring{getTopFamilies()}{getTopFamilies()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\+::get\+Top\+Families (\begin{DoxyParamCaption}\item[{}]{\$time\+Range = {\ttfamily \textquotesingle{}all\textquotesingle{}},  }\item[{}]{\$limit = {\ttfamily 10} }\end{DoxyParamCaption})}



Obtiene las familias de hongos más comunes. 


\begin{DoxyParams}[1]{Parámetros}
string & {\em \$time\+Range} & Período de tiempo para filtrar los resultados \\
\hline
int & {\em \$limit} & Número máximo de familias a retornar \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Las familias de hongos más comunes con sus recuentos 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{StatsController_8php_source_l00336}{336}} del archivo \mbox{\hyperlink{StatsController_8php_source}{Stats\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00337\ \ \ \ \ \{}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \$timeCondition\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_acbcc9cd24df7ea83bb72e818e3cf4ebe}{getTimeRangeCondition}}(\$timeRange);}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \ \ \ \ \$result\ =\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}SELECT\ t.family,\ COUNT(*)\ as\ count\ }}
\DoxyCodeLine{00343\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FROM\ taxonomy\ t}}
\DoxyCodeLine{00344\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ JOIN\ fungi\ f\ ON\ f.id\ =\ t.fungi\_id}}
\DoxyCodeLine{00345\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$timeCondition}}
\DoxyCodeLine{00346\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ AND\ t.family\ IS\ NOT\ NULL\ }}
\DoxyCodeLine{00347\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GROUP\ BY\ t.family\ }}
\DoxyCodeLine{00348\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ORDER\ BY\ count\ DESC\ }}
\DoxyCodeLine{00349\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ LIMIT\ \$limit"{}}}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$result\ ===\ \textcolor{keyword}{false})\ \{}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}Error\ al\ obtener\ familias\ más\ comunes:\ Consulta\ fallida"{}});}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [];}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$result-\/>fetchAll(\(\backslash\)PDO::FETCH\_ASSOC);}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\(\backslash\)Exception\ \$e)\ \{}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}Error\ al\ obtener\ familias\ más\ comunes:\ "{}}\ .\ \$e-\/>getMessage());}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [];}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00362\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{StatsController_8php_source_l00055}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Time\+Range\+Condition()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1StatsController_abaa9ec5f3cfb54693308bfb1ec304163_cgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1StatsController_a33d5205f64fa0acd29b3416a6b5b5308}\label{classApp_1_1Controllers_1_1StatsController_a33d5205f64fa0acd29b3416a6b5b5308} 
\index{App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}!getTopFavorites@{getTopFavorites}}
\index{getTopFavorites@{getTopFavorites}!App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}}
\doxysubsubsection{\texorpdfstring{getTopFavorites()}{getTopFavorites()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\+::get\+Top\+Favorites (\begin{DoxyParamCaption}\item[{}]{\$limit = {\ttfamily 5} }\end{DoxyParamCaption})}



Obtiene los hongos más añadidos a favoritos. 


\begin{DoxyParams}[1]{Parámetros}
int & {\em \$limit} & Número máximo de resultados a retornar \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Los hongos más añadidos a favoritos 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{StatsController_8php_source_l00429}{429}} del archivo \mbox{\hyperlink{StatsController_8php_source}{Stats\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00430\ \ \ \ \ \{}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ \ \ \ \ \$result\ =\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}SELECT\ f.id,\ f.name,\ COUNT(uf.id)\ as\ favorites}}
\DoxyCodeLine{00434\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FROM\ fungi\ f}}
\DoxyCodeLine{00435\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ JOIN\ user\_favorites\ uf\ ON\ f.id\ =\ uf.fungi\_id}}
\DoxyCodeLine{00436\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GROUP\ BY\ f.id}}
\DoxyCodeLine{00437\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ORDER\ BY\ COUNT(uf.id)\ DESC}}
\DoxyCodeLine{00438\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ LIMIT\ \$limit"{}}}
\DoxyCodeLine{00439\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00440\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00441\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$result\ ===\ \textcolor{keyword}{false})\ \{}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}Error\ al\ obtener\ hongos\ favoritos:\ Consulta\ fallida"{}});}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [];}
\DoxyCodeLine{00444\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$result-\/>fetchAll(\(\backslash\)PDO::FETCH\_ASSOC);}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\(\backslash\)Exception\ \$e)\ \{}
\DoxyCodeLine{00448\ \ \ \ \ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}Error\ al\ obtener\ hongos\ favoritos:\ "{}}\ .\ \$e-\/>getMessage());}
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [];}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00451\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Controllers_1_1StatsController_ac15d7095c544e0023e61febc70e6e690}\label{classApp_1_1Controllers_1_1StatsController_ac15d7095c544e0023e61febc70e6e690} 
\index{App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}!getTopLiked@{getTopLiked}}
\index{getTopLiked@{getTopLiked}!App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}}
\doxysubsubsection{\texorpdfstring{getTopLiked()}{getTopLiked()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\+::get\+Top\+Liked (\begin{DoxyParamCaption}\item[{}]{\$limit = {\ttfamily 5} }\end{DoxyParamCaption})}



Obtiene los hongos más likeados. 


\begin{DoxyParams}[1]{Parámetros}
int & {\em \$limit} & Número máximo de resultados a retornar \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Los hongos con más likes 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{StatsController_8php_source_l00399}{399}} del archivo \mbox{\hyperlink{StatsController_8php_source}{Stats\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00400\ \ \ \ \ \{}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ \ \ \ \ \$result\ =\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}SELECT\ f.id,\ f.name,\ COUNT(ul.id)\ as\ likes}}
\DoxyCodeLine{00404\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FROM\ fungi\ f}}
\DoxyCodeLine{00405\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ JOIN\ user\_likes\ ul\ ON\ f.id\ =\ ul.fungi\_id}}
\DoxyCodeLine{00406\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GROUP\ BY\ f.id}}
\DoxyCodeLine{00407\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ORDER\ BY\ COUNT(ul.id)\ DESC}}
\DoxyCodeLine{00408\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ LIMIT\ \$limit"{}}}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$result\ ===\ \textcolor{keyword}{false})\ \{}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}Error\ al\ obtener\ hongos\ más\ likeados:\ Consulta\ fallida"{}});}
\DoxyCodeLine{00413\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [];}
\DoxyCodeLine{00414\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00415\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00416\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$result-\/>fetchAll(\(\backslash\)PDO::FETCH\_ASSOC);}
\DoxyCodeLine{00417\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\(\backslash\)Exception\ \$e)\ \{}
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}Error\ al\ obtener\ hongos\ más\ likeados:\ "{}}\ .\ \$e-\/>getMessage());}
\DoxyCodeLine{00419\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [];}
\DoxyCodeLine{00420\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00421\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Controllers_1_1StatsController_aa6d98d1284d05b3772442f189f643a88}\label{classApp_1_1Controllers_1_1StatsController_aa6d98d1284d05b3772442f189f643a88} 
\index{App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}!getTotalFungiCount@{getTotalFungiCount}}
\index{getTotalFungiCount@{getTotalFungiCount}!App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}}
\doxysubsubsection{\texorpdfstring{getTotalFungiCount()}{getTotalFungiCount()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\+::get\+Total\+Fungi\+Count (\begin{DoxyParamCaption}\item[{}]{\$time\+Range }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Obtiene el número total de hongos en la base de datos. 


\begin{DoxyParams}[1]{Parámetros}
string & {\em \$time\+Range} & Período de tiempo para filtrar los resultados \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
int Número total de hongos 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{StatsController_8php_source_l00253}{253}} del archivo \mbox{\hyperlink{StatsController_8php_source}{Stats\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00254\ \ \ \ \ \{}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \$timeCondition\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1StatsController_acbcc9cd24df7ea83bb72e818e3cf4ebe}{getTimeRangeCondition}}(\$timeRange);}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \$result\ =\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}SELECT\ COUNT(*)\ as\ count\ }}
\DoxyCodeLine{00258\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ FROM\ fungi\ }}
\DoxyCodeLine{00259\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \$timeCondition"{}}}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ )-\/>fetch(\(\backslash\)PDO::FETCH\_ASSOC);}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$result[\textcolor{stringliteral}{'count'}]\ ??\ 0;}
\DoxyCodeLine{00263\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{StatsController_8php_source_l00055}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+Time\+Range\+Condition()}}.



Referenciado por \mbox{\hyperlink{StatsController_8php_source_l00237}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}get\+General\+Stats()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1StatsController_aa6d98d1284d05b3772442f189f643a88_cgraph}
\end{center}
\end{figure}
Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1StatsController_aa6d98d1284d05b3772442f189f643a88_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1StatsController_a35b229bcab9985c40a2c2b2a26d8b774}\label{classApp_1_1Controllers_1_1StatsController_a35b229bcab9985c40a2c2b2a26d8b774} 
\index{App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}!getUserActivityStats@{getUserActivityStats}}
\index{getUserActivityStats@{getUserActivityStats}!App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}}
\doxysubsubsection{\texorpdfstring{getUserActivityStats()}{getUserActivityStats()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\+::get\+User\+Activity\+Stats (\begin{DoxyParamCaption}\item[{}]{\$time\+Range }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Obtiene estadísticas sobre la actividad de los usuarios. 


\begin{DoxyParams}[1]{Parámetros}
string & {\em \$time\+Range} & Período de tiempo para filtrar los resultados \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Datos de actividad de usuario agrupados por acción y fecha 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{StatsController_8php_source_l00211}{211}} del archivo \mbox{\hyperlink{StatsController_8php_source}{Stats\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00212\ \ \ \ \ \{}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \$interval\ =\ match(\$timeRange)\ \{}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'week'}\ =>\ \textcolor{stringliteral}{'7\ DAY'},}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'month'}\ =>\ \textcolor{stringliteral}{'30\ DAY'},}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'year'}\ =>\ \textcolor{stringliteral}{'365\ DAY'},}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}\ =>\ \textcolor{stringliteral}{'30\ DAY'}}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}SELECT\ action,\ COUNT(*)\ as\ count,}}
\DoxyCodeLine{00222\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ DATE\_FORMAT(access\_time,\ '\%Y-\/\%m-\/\%d')\ as\ date}}
\DoxyCodeLine{00223\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ FROM\ access\_logs}}
\DoxyCodeLine{00224\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ WHERE\ access\_time\ >=\ DATE\_SUB(NOW(),\ INTERVAL\ \$interval)}}
\DoxyCodeLine{00225\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ GROUP\ BY\ action,\ date}}
\DoxyCodeLine{00226\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ ORDER\ BY\ date\ ASC"{}},}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \ \ \ \ []}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ )-\/>fetchAll(\(\backslash\)PDO::FETCH\_ASSOC);}
\DoxyCodeLine{00229\ \ \ \ \ \}}

\end{DoxyCode}


\doxysubsection{Documentación de datos miembro}
\Hypertarget{classApp_1_1Controllers_1_1StatsController_acd274f9dac4bd8fb0b90261c3d971abd}\label{classApp_1_1Controllers_1_1StatsController_acd274f9dac4bd8fb0b90261c3d971abd} 
\index{App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}!\$db@{\$db}}
\index{\$db@{\$db}!App\textbackslash{}Controllers\textbackslash{}StatsController@{App\textbackslash{}Controllers\textbackslash{}StatsController}}
\doxysubsubsection{\texorpdfstring{\$db}{\$db}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\+::\$db\hspace{0.3cm}{\ttfamily [private]}}



Definición en la línea \mbox{\hyperlink{StatsController_8php_source_l00019}{19}} del archivo \mbox{\hyperlink{StatsController_8php_source}{Stats\+Controller.\+php}}.



Referenciado por \mbox{\hyperlink{StatsController_8php_source_l00026}{App\textbackslash{}\+Controllers\textbackslash{}\+Stats\+Controller\textbackslash{}\+\_\+\+\_\+construct()}}.



La documentación de esta clase está generada del siguiente archivo\+:\begin{DoxyCompactItemize}
\item 
src/controllers/\mbox{\hyperlink{StatsController_8php}{Stats\+Controller.\+php}}\end{DoxyCompactItemize}
