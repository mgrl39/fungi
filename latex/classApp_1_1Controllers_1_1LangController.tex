\doxysection{Referencia de la clase App\textbackslash{}Controllers\textbackslash{}Lang\+Controller}
\hypertarget{classApp_1_1Controllers_1_1LangController}{}\label{classApp_1_1Controllers_1_1LangController}\index{App\textbackslash{}Controllers\textbackslash{}LangController@{App\textbackslash{}Controllers\textbackslash{}LangController}}


Diagrama de colaboración de App\textbackslash{}Controllers\textbackslash{}Lang\+Controller\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=240pt]{classApp_1_1Controllers_1_1LangController__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Métodos públicos}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1LangController_ad665455fab964cc78b301960f255548c}{\+\_\+\+\_\+construct}} ()
\begin{DoxyCompactList}\small\item\em Constructor del controlador de idioma. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1LangController_a13fbc690481f06279c66dd4e168bbc14}{change\+Language}} ()
\begin{DoxyCompactList}\small\item\em Cambia el idioma de la aplicación. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1LangController_a6f8a96985210b857478f7abb5a1608fd}{configure\+Locale}} (\$lang)
\begin{DoxyCompactList}\small\item\em Configura el entorno local (gettext) para el idioma seleccionado. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1LangController_a4d95141176e66213b15ebd6cd6218114}{get\+Supported\+Languages}} ()
\begin{DoxyCompactList}\small\item\em Obtiene la lista de idiomas soportados. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1LangController_a9de49f3e9288ef20cd4c0bd0a7f92b79}{gettext}} (\$text, \$domain=\textquotesingle{}messages\textquotesingle{})
\begin{DoxyCompactList}\small\item\em Obtiene un texto traducido de un dominio específico. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1LangController_af5571544f9e3d28aa142583ede742466}{initialize\+Language}} ()
\begin{DoxyCompactList}\small\item\em Inicializa el idioma de la aplicación Detecta y configura el idioma actual según prioridad\+: \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1LangController_ab6eaada711800b3e02fde27f12d51220}{is\+Language\+Supported}} (\$lang)
\begin{DoxyCompactList}\small\item\em Verifica si un idioma está soportado. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1LangController_adaa8e6a1db373704ed4513c6f78b2006}{load\+Text\+Domain}} (\$domain)
\begin{DoxyCompactList}\small\item\em Carga un dominio de texto adicional para gettext. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Atributos privados}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1LangController_af33d8e2ff148d9e5143728741053881e}{\$locale\+Dir}}
\begin{DoxyCompactList}\small\item\em Directorio donde se almacenan las traducciones. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1LangController_ae3e7c1d50cfe6955ff67eb9652fd4d5f}{\$locale\+Map}}
\begin{DoxyCompactList}\small\item\em Mapeo de códigos de idioma a locales de sistema. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1LangController_a37f6530bdcf1292d8033d7c181b871fe}{\$supported\+Languages}} = \mbox{[}\textquotesingle{}es\textquotesingle{}, \textquotesingle{}en\textquotesingle{}, \textquotesingle{}ca\textquotesingle{}\mbox{]}
\begin{DoxyCompactList}\small\item\em Lista de idiomas soportados por la aplicación. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Descripción detallada}


Definición en la línea \mbox{\hyperlink{LangController_8php_source_l00005}{5}} del archivo \mbox{\hyperlink{LangController_8php_source}{Lang\+Controller.\+php}}.



\doxysubsection{Documentación de constructores y destructores}
\Hypertarget{classApp_1_1Controllers_1_1LangController_ad665455fab964cc78b301960f255548c}\label{classApp_1_1Controllers_1_1LangController_ad665455fab964cc78b301960f255548c} 
\index{App\textbackslash{}Controllers\textbackslash{}LangController@{App\textbackslash{}Controllers\textbackslash{}LangController}!\_\_construct@{\_\_construct}}
\index{\_\_construct@{\_\_construct}!App\textbackslash{}Controllers\textbackslash{}LangController@{App\textbackslash{}Controllers\textbackslash{}LangController}}
\doxysubsubsection{\texorpdfstring{\_\_construct()}{\_\_construct()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Lang\+Controller\+::\+\_\+\+\_\+construct (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Constructor del controlador de idioma. 



Definición en la línea \mbox{\hyperlink{LangController_8php_source_l00029}{29}} del archivo \mbox{\hyperlink{LangController_8php_source}{Lang\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00030\ \ \ \ \ \{}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \$this-\/>localeDir\ =\ dirname(\_\_DIR\_\_,\ 2)\ .\ \textcolor{stringliteral}{'/locales'};}
\DoxyCodeLine{00032\ \ \ \ \ \}}

\end{DoxyCode}


\doxysubsection{Documentación de funciones miembro}
\Hypertarget{classApp_1_1Controllers_1_1LangController_a13fbc690481f06279c66dd4e168bbc14}\label{classApp_1_1Controllers_1_1LangController_a13fbc690481f06279c66dd4e168bbc14} 
\index{App\textbackslash{}Controllers\textbackslash{}LangController@{App\textbackslash{}Controllers\textbackslash{}LangController}!changeLanguage@{changeLanguage}}
\index{changeLanguage@{changeLanguage}!App\textbackslash{}Controllers\textbackslash{}LangController@{App\textbackslash{}Controllers\textbackslash{}LangController}}
\doxysubsubsection{\texorpdfstring{changeLanguage()}{changeLanguage()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Lang\+Controller\+::change\+Language (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Cambia el idioma de la aplicación. 

\begin{DoxyReturn}{Devuelve}
array Respuesta con el resultado del cambio de idioma 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{LangController_8php_source_l00156}{156}} del archivo \mbox{\hyperlink{LangController_8php_source}{Lang\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00157\ \ \ \ \ \{}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Obtener\ el\ idioma\ seleccionado}}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \$lang\ =\ \$\_POST[\textcolor{stringliteral}{'lang'}]\ ??\ \textcolor{stringliteral}{'es'};}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Validar\ que\ el\ idioma\ esté\ entre\ los\ soportados}}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1LangController_ab6eaada711800b3e02fde27f12d51220}{isLanguageSupported}}(\$lang))\ \{}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Guardar\ el\ idioma\ en\ la\ sesión}}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ \$\_SESSION[\textcolor{stringliteral}{'idioma'}]\ =\ \$lang;}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Guardar\ en\ cookie\ para\ recordar\ preferencia}}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ setcookie(\textcolor{stringliteral}{'idioma'},\ \$lang,\ time()\ +\ (86400\ *\ 30),\ \textcolor{stringliteral}{"{}/"{}});\ \textcolor{comment}{//\ Cookie\ válida\ por\ 30\ días}}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Verificar\ si\ es\ una\ solicitud\ AJAX}}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \$isAjax\ =\ !empty(\$\_SERVER[\textcolor{stringliteral}{'HTTP\_X\_REQUESTED\_WITH'}])\ \&\&\ }
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ strtolower(\$\_SERVER[\textcolor{stringliteral}{'HTTP\_X\_REQUESTED\_WITH'}])\ ==\ \textcolor{stringliteral}{'xmlhttprequest'};}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$isAjax)\ \{}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Si\ es\ AJAX,\ devolvemos\ un\ JSON\ con\ estado\ de\ éxito}}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ header(\textcolor{stringliteral}{'Content-\/Type:\ application/json'});}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ echo\ json\_encode([\textcolor{stringliteral}{'success'}\ =>\ \textcolor{keyword}{true},\ \textcolor{stringliteral}{'language'}\ =>\ \$lang]);}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ exit;}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Si\ no\ es\ AJAX,\ redirigir\ a\ la\ página\ anterior\ o\ principal}}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \$redirect\ =\ \$\_POST[\textcolor{stringliteral}{'redirect'}]\ ??\ \textcolor{charliteral}{'/'};}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ header(\textcolor{stringliteral}{'Location:\ '}\ .\ \$redirect);}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ exit;}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00185\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{LangController_8php_source_l00050}{App\textbackslash{}\+Controllers\textbackslash{}\+Lang\+Controller\textbackslash{}is\+Language\+Supported()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1LangController_a13fbc690481f06279c66dd4e168bbc14_cgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1LangController_a6f8a96985210b857478f7abb5a1608fd}\label{classApp_1_1Controllers_1_1LangController_a6f8a96985210b857478f7abb5a1608fd} 
\index{App\textbackslash{}Controllers\textbackslash{}LangController@{App\textbackslash{}Controllers\textbackslash{}LangController}!configureLocale@{configureLocale}}
\index{configureLocale@{configureLocale}!App\textbackslash{}Controllers\textbackslash{}LangController@{App\textbackslash{}Controllers\textbackslash{}LangController}}
\doxysubsubsection{\texorpdfstring{configureLocale()}{configureLocale()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Lang\+Controller\+::configure\+Locale (\begin{DoxyParamCaption}\item[{}]{\$lang }\end{DoxyParamCaption})}



Configura el entorno local (gettext) para el idioma seleccionado. 


\begin{DoxyParams}[1]{Parámetros}
string & {\em \$lang} & Código del idioma a configurar \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
void 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{LangController_8php_source_l00083}{83}} del archivo \mbox{\hyperlink{LangController_8php_source}{Lang\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00084\ \ \ \ \ \{}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1LangController_ab6eaada711800b3e02fde27f12d51220}{isLanguageSupported}}(\$lang))\ \{}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \$lang\ =\ \textcolor{stringliteral}{'es'};\ \textcolor{comment}{//\ Idioma\ por\ defecto\ si\ el\ solicitado\ no\ está\ soportado}}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Obtener\ el\ locale\ del\ sistema\ operativo\ correspondiente}}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \$locale\ =\ (\$this-\/>localeMap[\$lang]\ ??\ \textcolor{stringliteral}{'es\_ES'})\ .\ \textcolor{stringliteral}{'.UTF-\/8'};}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Configurar\ gettext}}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ putenv(\textcolor{stringliteral}{"{}LANG=\$locale"{}});}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ putenv(\textcolor{stringliteral}{"{}LANGUAGE=\$locale"{}});}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ putenv(\textcolor{stringliteral}{"{}LC\_ALL=\$locale"{}});}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ setlocale(LC\_ALL,\ \$locale);}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Configurar\ dominio\ de\ mensajes\ principal}}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ bindtextdomain(\textcolor{stringliteral}{"{}messages"{}},\ \$this-\/>localeDir);}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ bind\_textdomain\_codeset(\textcolor{stringliteral}{"{}messages"{}},\ \textcolor{stringliteral}{"{}UTF-\/8"{}});}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ textdomain(\textcolor{stringliteral}{"{}messages"{}});}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ NUEVO:\ Cargar\ dominios\ adicionales\ de\ forma\ predeterminada}}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \$default\_domains\ =\ [\textcolor{stringliteral}{'navbar'},\ \textcolor{stringliteral}{'about'},\ \textcolor{stringliteral}{'home'},\ \textcolor{stringliteral}{'profile'}];}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{foreach}\ (\$default\_domains\ as\ \$domain)\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1LangController_adaa8e6a1db373704ed4513c6f78b2006}{loadTextDomain}}(\$domain);}
\DoxyCodeLine{00106\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{LangController_8php_source_l00050}{App\textbackslash{}\+Controllers\textbackslash{}\+Lang\+Controller\textbackslash{}is\+Language\+Supported()}} y \mbox{\hyperlink{LangController_8php_source_l00114}{App\textbackslash{}\+Controllers\textbackslash{}\+Lang\+Controller\textbackslash{}load\+Text\+Domain()}}.



Referenciado por \mbox{\hyperlink{LangController_8php_source_l00066}{App\textbackslash{}\+Controllers\textbackslash{}\+Lang\+Controller\textbackslash{}initialize\+Language()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1LangController_a6f8a96985210b857478f7abb5a1608fd_cgraph}
\end{center}
\end{figure}
Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1LangController_a6f8a96985210b857478f7abb5a1608fd_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1LangController_a4d95141176e66213b15ebd6cd6218114}\label{classApp_1_1Controllers_1_1LangController_a4d95141176e66213b15ebd6cd6218114} 
\index{App\textbackslash{}Controllers\textbackslash{}LangController@{App\textbackslash{}Controllers\textbackslash{}LangController}!getSupportedLanguages@{getSupportedLanguages}}
\index{getSupportedLanguages@{getSupportedLanguages}!App\textbackslash{}Controllers\textbackslash{}LangController@{App\textbackslash{}Controllers\textbackslash{}LangController}}
\doxysubsubsection{\texorpdfstring{getSupportedLanguages()}{getSupportedLanguages()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Lang\+Controller\+::get\+Supported\+Languages (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Obtiene la lista de idiomas soportados. 

\begin{DoxyReturn}{Devuelve}
array Lista de idiomas soportados 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{LangController_8php_source_l00039}{39}} del archivo \mbox{\hyperlink{LangController_8php_source}{Lang\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00040\ \ \ \ \ \{}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classApp_1_1Controllers_1_1LangController_a37f6530bdcf1292d8033d7c181b871fe}{\$this-\/>supportedLanguages}};}
\DoxyCodeLine{00042\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{LangController_8php_source_l00010}{App\textbackslash{}\+Controllers\textbackslash{}\+Lang\+Controller\textbackslash{}\$supported\+Languages}}.

\Hypertarget{classApp_1_1Controllers_1_1LangController_a9de49f3e9288ef20cd4c0bd0a7f92b79}\label{classApp_1_1Controllers_1_1LangController_a9de49f3e9288ef20cd4c0bd0a7f92b79} 
\index{App\textbackslash{}Controllers\textbackslash{}LangController@{App\textbackslash{}Controllers\textbackslash{}LangController}!gettext@{gettext}}
\index{gettext@{gettext}!App\textbackslash{}Controllers\textbackslash{}LangController@{App\textbackslash{}Controllers\textbackslash{}LangController}}
\doxysubsubsection{\texorpdfstring{gettext()}{gettext()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Lang\+Controller\+::gettext (\begin{DoxyParamCaption}\item[{}]{\$text,  }\item[{}]{\$domain = {\ttfamily \textquotesingle{}messages\textquotesingle{}} }\end{DoxyParamCaption})}



Obtiene un texto traducido de un dominio específico. 


\begin{DoxyParams}[1]{Parámetros}
string & {\em \$text} & Texto a traducir \\
\hline
string & {\em \$domain} & Dominio de texto \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
string Texto traducido 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{LangController_8php_source_l00140}{140}} del archivo \mbox{\hyperlink{LangController_8php_source}{Lang\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00141\ \ \ \ \ \{}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \$traduccion\ =\ dgettext(\$domain,\ \$text);}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$traduccion\ ===\ \$text\ \&\&\ \$domain\ !==\ \textcolor{stringliteral}{'messages'})\ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}Error\ de\ traducción:\ '\$text'\ no\ encontrado\ en\ dominio\ '\$domain'"{}});}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Intenta\ buscar\ en\ el\ dominio\ messages\ como\ último\ recurso}}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ \$traduccion\ =\ dgettext(\textcolor{stringliteral}{'messages'},\ \$text);}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$traduccion;}
\DoxyCodeLine{00149\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Controllers_1_1LangController_af5571544f9e3d28aa142583ede742466}\label{classApp_1_1Controllers_1_1LangController_af5571544f9e3d28aa142583ede742466} 
\index{App\textbackslash{}Controllers\textbackslash{}LangController@{App\textbackslash{}Controllers\textbackslash{}LangController}!initializeLanguage@{initializeLanguage}}
\index{initializeLanguage@{initializeLanguage}!App\textbackslash{}Controllers\textbackslash{}LangController@{App\textbackslash{}Controllers\textbackslash{}LangController}}
\doxysubsubsection{\texorpdfstring{initializeLanguage()}{initializeLanguage()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Lang\+Controller\+::initialize\+Language (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Inicializa el idioma de la aplicación Detecta y configura el idioma actual según prioridad\+: 


\begin{DoxyEnumerate}
\item Parámetro GET \textquotesingle{}lang\textquotesingle{}
\item Sesión
\item Cookie
\item Navegador
\item Idioma por defecto (es)
\end{DoxyEnumerate}

\begin{DoxyReturn}{Devuelve}
string Código del idioma seleccionado 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{LangController_8php_source_l00066}{66}} del archivo \mbox{\hyperlink{LangController_8php_source}{Lang\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00067\ \ \ \ \ \{}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (isset(\$\_GET[\textcolor{stringliteral}{'lang'}])\ \&\&\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1LangController_ab6eaada711800b3e02fde27f12d51220}{isLanguageSupported}}(\$\_GET[\textcolor{stringliteral}{'lang'}]))\ \$\_SESSION[\textcolor{stringliteral}{'idioma'}]\ =\ \$\_GET[\textcolor{stringliteral}{'lang'}];}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \$idioma\ =\ \$\_SESSION[\textcolor{stringliteral}{'idioma'}]\ ??\ \$\_COOKIE[\textcolor{stringliteral}{'idioma'}]\ ??\ substr(\$\_SERVER[\textcolor{stringliteral}{'HTTP\_ACCEPT\_LANGUAGE'}]\ ??\ \textcolor{stringliteral}{'es'},\ 0,\ 2);}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1LangController_ab6eaada711800b3e02fde27f12d51220}{isLanguageSupported}}(\$idioma))\ \$idioma\ =\ \textcolor{stringliteral}{'es'};}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \$\_SESSION[\textcolor{stringliteral}{'idioma'}]\ =\ \$idioma;}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1LangController_a6f8a96985210b857478f7abb5a1608fd}{configureLocale}}(\$idioma);}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$idioma;}
\DoxyCodeLine{00075\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{LangController_8php_source_l00083}{App\textbackslash{}\+Controllers\textbackslash{}\+Lang\+Controller\textbackslash{}configure\+Locale()}} y \mbox{\hyperlink{LangController_8php_source_l00050}{App\textbackslash{}\+Controllers\textbackslash{}\+Lang\+Controller\textbackslash{}is\+Language\+Supported()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1LangController_af5571544f9e3d28aa142583ede742466_cgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1LangController_ab6eaada711800b3e02fde27f12d51220}\label{classApp_1_1Controllers_1_1LangController_ab6eaada711800b3e02fde27f12d51220} 
\index{App\textbackslash{}Controllers\textbackslash{}LangController@{App\textbackslash{}Controllers\textbackslash{}LangController}!isLanguageSupported@{isLanguageSupported}}
\index{isLanguageSupported@{isLanguageSupported}!App\textbackslash{}Controllers\textbackslash{}LangController@{App\textbackslash{}Controllers\textbackslash{}LangController}}
\doxysubsubsection{\texorpdfstring{isLanguageSupported()}{isLanguageSupported()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Lang\+Controller\+::is\+Language\+Supported (\begin{DoxyParamCaption}\item[{}]{\$lang }\end{DoxyParamCaption})}



Verifica si un idioma está soportado. 


\begin{DoxyParams}[1]{Parámetros}
string & {\em \$lang} & Código del idioma a verificar \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
bool True si el idioma está soportado, false en caso contrario 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{LangController_8php_source_l00050}{50}} del archivo \mbox{\hyperlink{LangController_8php_source}{Lang\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00051\ \ \ \ \ \{}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ in\_array(\$lang,\ \$this-\/>supportedLanguages);}
\DoxyCodeLine{00053\ \ \ \ \ \}}

\end{DoxyCode}


Referenciado por \mbox{\hyperlink{LangController_8php_source_l00156}{App\textbackslash{}\+Controllers\textbackslash{}\+Lang\+Controller\textbackslash{}change\+Language()}}, \mbox{\hyperlink{LangController_8php_source_l00083}{App\textbackslash{}\+Controllers\textbackslash{}\+Lang\+Controller\textbackslash{}configure\+Locale()}} y \mbox{\hyperlink{LangController_8php_source_l00066}{App\textbackslash{}\+Controllers\textbackslash{}\+Lang\+Controller\textbackslash{}initialize\+Language()}}.

Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1LangController_ab6eaada711800b3e02fde27f12d51220_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1LangController_adaa8e6a1db373704ed4513c6f78b2006}\label{classApp_1_1Controllers_1_1LangController_adaa8e6a1db373704ed4513c6f78b2006} 
\index{App\textbackslash{}Controllers\textbackslash{}LangController@{App\textbackslash{}Controllers\textbackslash{}LangController}!loadTextDomain@{loadTextDomain}}
\index{loadTextDomain@{loadTextDomain}!App\textbackslash{}Controllers\textbackslash{}LangController@{App\textbackslash{}Controllers\textbackslash{}LangController}}
\doxysubsubsection{\texorpdfstring{loadTextDomain()}{loadTextDomain()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Lang\+Controller\+::load\+Text\+Domain (\begin{DoxyParamCaption}\item[{}]{\$domain }\end{DoxyParamCaption})}



Carga un dominio de texto adicional para gettext. 


\begin{DoxyParams}[1]{Parámetros}
string & {\em \$domain} & Nombre del dominio de texto \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
bool Éxito de la operación 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{LangController_8php_source_l00114}{114}} del archivo \mbox{\hyperlink{LangController_8php_source}{Lang\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00115\ \ \ \ \ \{}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Verificar\ si\ el\ archivo\ de\ traducción\ existe}}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \$moFile\ =\ \$this-\/>localeDir\ .\ \textcolor{charliteral}{'/'}\ .\ \$this-\/>localeMap[\$\_SESSION[\textcolor{stringliteral}{'idioma'}]\ ??\ \textcolor{stringliteral}{'es'}]\ .\ \textcolor{stringliteral}{'/LC\_MESSAGES/'}\ .\ \$domain\ .\ \textcolor{stringliteral}{'.mo'};}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!file\_exists(\$moFile))\ \{}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}No\ se\ encuentra\ el\ archivo\ de\ traducciones:\ \$moFile"{}});}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ bindtextdomain(\$domain,\ \$this-\/>localeDir);}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ bind\_textdomain\_codeset(\$domain,\ \textcolor{stringliteral}{"{}UTF-\/8"{}});}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ NO\ cambiar\ el\ dominio\ activo,\ solo\ registrarlo}}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Usar\ dgettext()\ para\ obtener\ traducciones\ de\ dominios\ específicos}}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00131\ \ \ \ \ \}}

\end{DoxyCode}


Referenciado por \mbox{\hyperlink{LangController_8php_source_l00083}{App\textbackslash{}\+Controllers\textbackslash{}\+Lang\+Controller\textbackslash{}configure\+Locale()}}.

Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1LangController_adaa8e6a1db373704ed4513c6f78b2006_icgraph}
\end{center}
\end{figure}


\doxysubsection{Documentación de datos miembro}
\Hypertarget{classApp_1_1Controllers_1_1LangController_af33d8e2ff148d9e5143728741053881e}\label{classApp_1_1Controllers_1_1LangController_af33d8e2ff148d9e5143728741053881e} 
\index{App\textbackslash{}Controllers\textbackslash{}LangController@{App\textbackslash{}Controllers\textbackslash{}LangController}!\$localeDir@{\$localeDir}}
\index{\$localeDir@{\$localeDir}!App\textbackslash{}Controllers\textbackslash{}LangController@{App\textbackslash{}Controllers\textbackslash{}LangController}}
\doxysubsubsection{\texorpdfstring{\$localeDir}{\$localeDir}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Lang\+Controller\+::\$locale\+Dir\hspace{0.3cm}{\ttfamily [private]}}



Directorio donde se almacenan las traducciones. 



Definición en la línea \mbox{\hyperlink{LangController_8php_source_l00024}{24}} del archivo \mbox{\hyperlink{LangController_8php_source}{Lang\+Controller.\+php}}.

\Hypertarget{classApp_1_1Controllers_1_1LangController_ae3e7c1d50cfe6955ff67eb9652fd4d5f}\label{classApp_1_1Controllers_1_1LangController_ae3e7c1d50cfe6955ff67eb9652fd4d5f} 
\index{App\textbackslash{}Controllers\textbackslash{}LangController@{App\textbackslash{}Controllers\textbackslash{}LangController}!\$localeMap@{\$localeMap}}
\index{\$localeMap@{\$localeMap}!App\textbackslash{}Controllers\textbackslash{}LangController@{App\textbackslash{}Controllers\textbackslash{}LangController}}
\doxysubsubsection{\texorpdfstring{\$localeMap}{\$localeMap}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Lang\+Controller\+::\$locale\+Map\hspace{0.3cm}{\ttfamily [private]}}

{\bfseries Valor inicial\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ [}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'es'}\ =>\ \textcolor{stringliteral}{'es\_ES'},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'en'}\ =>\ \textcolor{stringliteral}{'en\_US'},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'ca'}\ =>\ \textcolor{stringliteral}{'ca\_ES'}}
\DoxyCodeLine{\ \ \ \ ]}

\end{DoxyCode}


Mapeo de códigos de idioma a locales de sistema. 



Definición en la línea \mbox{\hyperlink{LangController_8php_source_l00015}{15}} del archivo \mbox{\hyperlink{LangController_8php_source}{Lang\+Controller.\+php}}.

\Hypertarget{classApp_1_1Controllers_1_1LangController_a37f6530bdcf1292d8033d7c181b871fe}\label{classApp_1_1Controllers_1_1LangController_a37f6530bdcf1292d8033d7c181b871fe} 
\index{App\textbackslash{}Controllers\textbackslash{}LangController@{App\textbackslash{}Controllers\textbackslash{}LangController}!\$supportedLanguages@{\$supportedLanguages}}
\index{\$supportedLanguages@{\$supportedLanguages}!App\textbackslash{}Controllers\textbackslash{}LangController@{App\textbackslash{}Controllers\textbackslash{}LangController}}
\doxysubsubsection{\texorpdfstring{\$supportedLanguages}{\$supportedLanguages}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Lang\+Controller\+::\$supported\+Languages = \mbox{[}\textquotesingle{}es\textquotesingle{}, \textquotesingle{}en\textquotesingle{}, \textquotesingle{}ca\textquotesingle{}\mbox{]}\hspace{0.3cm}{\ttfamily [private]}}



Lista de idiomas soportados por la aplicación. 



Definición en la línea \mbox{\hyperlink{LangController_8php_source_l00010}{10}} del archivo \mbox{\hyperlink{LangController_8php_source}{Lang\+Controller.\+php}}.



Referenciado por \mbox{\hyperlink{LangController_8php_source_l00039}{App\textbackslash{}\+Controllers\textbackslash{}\+Lang\+Controller\textbackslash{}get\+Supported\+Languages()}}.



La documentación de esta clase está generada del siguiente archivo\+:\begin{DoxyCompactItemize}
\item 
src/controllers/\mbox{\hyperlink{LangController_8php}{Lang\+Controller.\+php}}\end{DoxyCompactItemize}
