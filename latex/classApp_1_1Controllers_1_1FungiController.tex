\doxysection{Referencia de la clase App\textbackslash{}Controllers\textbackslash{}Fungi\+Controller}
\hypertarget{classApp_1_1Controllers_1_1FungiController}{}\label{classApp_1_1Controllers_1_1FungiController}\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}


Controlador para la gestión de hongos (fungi) en la aplicación.  




Diagrama de colaboración de App\textbackslash{}Controllers\textbackslash{}Fungi\+Controller\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=243pt]{classApp_1_1Controllers_1_1FungiController__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Métodos públicos}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_af7000ed08fe4bc6c08d0b40591e112b7}{\+\_\+\+\_\+construct}} (\$db)
\begin{DoxyCompactList}\small\item\em Constructor de la clase Fungi\+Controller. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a9d16717512fc95fa89a23c45ad840b7b}{detail\+Fungus\+Handler}} (\$twig, \$db, \$session, \$params=\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em Manejador para la ruta de detalles del hongo. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a0bb355407938be2032959dd234e0b13c}{get\+Fungus\+By\+Id}} (\$id)
\begin{DoxyCompactList}\small\item\em Obtiene un hongo por su ID. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_add0b456287a79c088c78a9fe8c469451}{get\+Fungus\+With\+Like\+Status}} (\$fungus, \$user\+Id)
\begin{DoxyCompactList}\small\item\em Añade el estado de like de un usuario a la información de un hongo. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a3a07c5dd018b701663a2a46a52f74a6d}{get\+Random\+Fungus}} ()
\begin{DoxyCompactList}\small\item\em Obtiene un hongo aleatorio de la base de datos. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a35fbbcc5cad471348611c0e1cfafebd7}{has\+User\+Liked\+Fungi}} (\$user\+Id, \$fungi\+Id)
\begin{DoxyCompactList}\small\item\em Verifica si un usuario ha dado like a un hongo. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a4e795756d06c8d0ff755c20645eddb12}{increment\+Fungi\+Views}} (\$fungi\+Id)
\begin{DoxyCompactList}\small\item\em Incrementa el contador de vistas de un hongo. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a61834711a6b3748eca87a0644c08babb}{like\+Fungi}} (\$user\+Id, \$fungi\+Id)
\begin{DoxyCompactList}\small\item\em Registra que un usuario ha dado like a un hongo. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_ade6fc0ad20f30ba8d2ba5efcf3d7064c}{random\+Fungus\+Handler}} (\$twig, \$db, \$session)
\begin{DoxyCompactList}\small\item\em Manejador para la ruta de hongo aleatorio. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a087b8275e77143716ac62ea228074a20}{unlike\+Fungi}} (\$user\+Id, \$fungi\+Id)
\begin{DoxyCompactList}\small\item\em Elimina el like de un usuario a un hongo. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Métodos privados}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a7f868fa3d67eefa14cd17d62e80b3d3d}{get\+Image\+Base\+Path}} (\$config\+Key)
\begin{DoxyCompactList}\small\item\em Obtiene la ruta base para las imágenes según la clave de configuración. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a69ba801a8491aa101cefc5928144e616}{load\+Fungus\+Images}} (\$fungus)
\begin{DoxyCompactList}\small\item\em Carga las imágenes relacionadas con un hongo desde la tabla de relaciones. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_af994c3d12f7062ddd44a40c3505bff3d}{update\+Fungi\+Likes}} (\$fungi\+Id, \$increment)
\begin{DoxyCompactList}\small\item\em Actualiza el contador de likes de un hongo. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Atributos privados}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_ab1b8e71c0976e182854ff195764611c6}{\$db}}
\end{DoxyCompactItemize}


\doxysubsection{Descripción detallada}
Controlador para la gestión de hongos (fungi) en la aplicación. 

Esta clase maneja las operaciones relacionadas con los hongos, incluyendo likes, vistas y consultas de información 

Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00013}{13}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.



\doxysubsection{Documentación de constructores y destructores}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_af7000ed08fe4bc6c08d0b40591e112b7}\label{classApp_1_1Controllers_1_1FungiController_af7000ed08fe4bc6c08d0b40591e112b7} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!\_\_construct@{\_\_construct}}
\index{\_\_construct@{\_\_construct}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{\_\_construct()}{\_\_construct()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::\+\_\+\+\_\+construct (\begin{DoxyParamCaption}\item[{}]{\$db }\end{DoxyParamCaption})}



Constructor de la clase Fungi\+Controller. 


\begin{DoxyParams}[1]{Parámetros}
object & {\em \$db} & Instancia del controlador de base de datos \\
\hline
\end{DoxyParams}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00023}{23}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00024\ \ \ \ \ \{}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \$this-\/>db\ =\ \mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_ab1b8e71c0976e182854ff195764611c6}{\$db}};}
\DoxyCodeLine{00026\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{FungiController_8php_source_l00016}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}\$db}}.



\doxysubsection{Documentación de funciones miembro}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_a9d16717512fc95fa89a23c45ad840b7b}\label{classApp_1_1Controllers_1_1FungiController_a9d16717512fc95fa89a23c45ad840b7b} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!detailFungusHandler@{detailFungusHandler}}
\index{detailFungusHandler@{detailFungusHandler}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{detailFungusHandler()}{detailFungusHandler()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::detail\+Fungus\+Handler (\begin{DoxyParamCaption}\item[{}]{\$twig,  }\item[{}]{\$db,  }\item[{}]{\$session,  }\item[{}]{\$params = {\ttfamily \mbox{[}\mbox{]}} }\end{DoxyParamCaption})}



Manejador para la ruta de detalles del hongo. 


\begin{DoxyParams}[1]{Parámetros}
object & {\em \$twig} & Instancia de Twig \\
\hline
object & {\em \$db} & Instancia de la base de datos \\
\hline
object & {\em \$session} & Controlador de sesión \\
\hline
array & {\em \$params} & Parámetros de la ruta \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Datos para la plantilla 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00299}{299}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00300\ \ \ \ \ \{}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \$id\ =\ \textcolor{keyword}{null};}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_array(\$params)\ \&\&\ !empty(\$params))\ \{}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ \ \ \ \$id\ =\ \$params[0]\ ??\ \textcolor{keyword}{null};}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (empty(\$id)\ \&\&\ isset(\$\_SERVER[\textcolor{stringliteral}{'REQUEST\_URI'}]))\ \{}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ preg\_match(\textcolor{stringliteral}{'\#\string^/fungi/(\(\backslash\)d+)\$\#'},\ \$\_SERVER[\textcolor{stringliteral}{'REQUEST\_URI'}],\ \$matches);}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ \$id\ =\ \$matches[1]\ ??\ \textcolor{keyword}{null};}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}FungiController::detailFungusHandler\ -\/\ ID:\ "{}}\ .\ (\$id\ ??\ \textcolor{stringliteral}{'no\ ID'}));\ \ \ \ \ \ \ }
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \$fungus\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a0bb355407938be2032959dd234e0b13c}{getFungusById}}(\$id);}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\$fungus)\ \{}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ header(\textcolor{stringliteral}{'Location:\ /404'});}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \ \ \ \ exit;}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00318\ \ \ \ \ \ \ }
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'title'}\ =>\ \$fungus[\textcolor{stringliteral}{'name'}]\ ??\ \_(\textcolor{stringliteral}{'Detalles\ del\ Hongo'}),}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'fungi'}\ =>\ \$fungus,}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'similar\_fungi'}\ =>\ \$similarFungi\ ??\ [],}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'is\_logged\_in'}\ =>\ \mbox{\hyperlink{routes_8php_abefb3c26429d514777313e9a63d7cbac}{\$session}}-\/>isLoggedIn()}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ ];}
\DoxyCodeLine{00325\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{routes_8php_source_l00093}{\$session}} y \mbox{\hyperlink{FungiController_8php_source_l00132}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}get\+Fungus\+By\+Id()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1FungiController_a9d16717512fc95fa89a23c45ad840b7b_cgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_a0bb355407938be2032959dd234e0b13c}\label{classApp_1_1Controllers_1_1FungiController_a0bb355407938be2032959dd234e0b13c} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!getFungusById@{getFungusById}}
\index{getFungusById@{getFungusById}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{getFungusById()}{getFungusById()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::get\+Fungus\+By\+Id (\begin{DoxyParamCaption}\item[{}]{\$id }\end{DoxyParamCaption})}



Obtiene un hongo por su ID. 


\begin{DoxyParams}[1]{Parámetros}
int & {\em \$id} & ID del hongo a buscar \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array\texorpdfstring{$\vert$}{|}null Datos del hongo o null si no se encuentra 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00132}{132}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00133\ \ \ \ \ \{}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \$result\ =\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}SELECT\ *\ FROM\ fungi\ WHERE\ id\ =\ ?\ LIMIT\ 1"{}},}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ [\$id]}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Si\ el\ resultado\ es\ un\ objeto\ PDOStatement,\ convertirlo\ a\ array}}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$result\ instanceof\ \(\backslash\)PDOStatement)\ \{}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ \$fungus\ =\ \$result-\/>fetch(\(\backslash\)PDO::FETCH\_ASSOC)\ ?:\ \textcolor{keyword}{null};}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Si\ ya\ es\ un\ array\ con\ índices\ numéricos\ (múltiples\ filas)}}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_array(\$result)\ \&\&\ !empty(\$result)\ \&\&\ isset(\$result[0]))\ \{}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$fungus\ =\ \$result[0];}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Si\ ya\ es\ un\ array\ asociativo\ simple\ o\ está\ vacío}}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$fungus\ =\ \$result\ ?:\ \textcolor{keyword}{null};}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Obtener\ las\ imágenes\ relacionadas}}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$fungus)\ \{}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \$fungus\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a69ba801a8491aa101cefc5928144e616}{loadFungusImages}}(\$fungus);}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$fungus;}
\DoxyCodeLine{00158\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{FungiController_8php_source_l00200}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}load\+Fungus\+Images()}}.



Referenciado por \mbox{\hyperlink{FungiController_8php_source_l00299}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}detail\+Fungus\+Handler()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1FungiController_a0bb355407938be2032959dd234e0b13c_cgraph}
\end{center}
\end{figure}
Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1FungiController_a0bb355407938be2032959dd234e0b13c_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_add0b456287a79c088c78a9fe8c469451}\label{classApp_1_1Controllers_1_1FungiController_add0b456287a79c088c78a9fe8c469451} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!getFungusWithLikeStatus@{getFungusWithLikeStatus}}
\index{getFungusWithLikeStatus@{getFungusWithLikeStatus}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{getFungusWithLikeStatus()}{getFungusWithLikeStatus()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::get\+Fungus\+With\+Like\+Status (\begin{DoxyParamCaption}\item[{}]{\$fungus,  }\item[{}]{\$user\+Id }\end{DoxyParamCaption})}



Añade el estado de like de un usuario a la información de un hongo. 


\begin{DoxyParams}[1]{Parámetros}
array & {\em \$fungus} & Datos del hongo \\
\hline
int & {\em \$user\+Id} & ID del usuario\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Datos del hongo con el estado de like añadido 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00118}{118}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00119\ \ \ \ \ \{}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$fungus\ \&\&\ \$userId)\ \{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \$fungus[\textcolor{stringliteral}{'is\_liked'}]\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a35fbbcc5cad471348611c0e1cfafebd7}{hasUserLikedFungi}}(\$userId,\ \$fungus[\textcolor{stringliteral}{'id'}]);}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$fungus;}
\DoxyCodeLine{00124\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{FungiController_8php_source_l00101}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}has\+User\+Liked\+Fungi()}}.



Referenciado por \mbox{\hyperlink{FungiController_8php_source_l00270}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}random\+Fungus\+Handler()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1FungiController_add0b456287a79c088c78a9fe8c469451_cgraph}
\end{center}
\end{figure}
Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1FungiController_add0b456287a79c088c78a9fe8c469451_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_a7f868fa3d67eefa14cd17d62e80b3d3d}\label{classApp_1_1Controllers_1_1FungiController_a7f868fa3d67eefa14cd17d62e80b3d3d} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!getImageBasePath@{getImageBasePath}}
\index{getImageBasePath@{getImageBasePath}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{getImageBasePath()}{getImageBasePath()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::get\+Image\+Base\+Path (\begin{DoxyParamCaption}\item[{}]{\$config\+Key }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Obtiene la ruta base para las imágenes según la clave de configuración. 


\begin{DoxyParams}[1]{Parámetros}
string & {\em \$config\+Key} & Clave de configuración \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
string Ruta base para las imágenes 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00249}{249}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00250\ \ \ \ \ \{}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Mapeo\ de\ claves\ de\ configuración\ a\ rutas\ base}}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \$pathMap\ =\ [}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'fungi\_upload\_path'}\ =>\ \textcolor{stringliteral}{'/assets/images'},}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'user\_upload\_path'}\ =>\ \textcolor{stringliteral}{'/assets/images/users'},}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'system\_images'}\ =>\ \textcolor{stringliteral}{'/assets/images/system'}}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ ];}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Devolver\ la\ ruta\ correspondiente\ o\ una\ ruta\ predeterminada}}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$pathMap[\$configKey]\ ??\ \textcolor{stringliteral}{'/assets/images'};}
\DoxyCodeLine{00260\ \ \ \ \ \}}

\end{DoxyCode}


Referenciado por \mbox{\hyperlink{FungiController_8php_source_l00200}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}load\+Fungus\+Images()}}.

Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1FungiController_a7f868fa3d67eefa14cd17d62e80b3d3d_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_a3a07c5dd018b701663a2a46a52f74a6d}\label{classApp_1_1Controllers_1_1FungiController_a3a07c5dd018b701663a2a46a52f74a6d} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!getRandomFungus@{getRandomFungus}}
\index{getRandomFungus@{getRandomFungus}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{getRandomFungus()}{getRandomFungus()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::get\+Random\+Fungus (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Obtiene un hongo aleatorio de la base de datos. 

\begin{DoxyReturn}{Devuelve}
array\texorpdfstring{$\vert$}{|}null Datos del hongo aleatorio o null si no se encuentra ninguno 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00165}{165}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00166\ \ \ \ \ \{}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \$query\ =\ \textcolor{stringliteral}{"{}SELECT\ *\ FROM\ fungi\ ORDER\ BY\ RAND()\ LIMIT\ 1"{}};}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \$randomResult\ =\ \$this-\/>db-\/>query(\$query);}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Procesar\ el\ resultado\ según\ el\ tipo\ de\ retorno\ de\ la\ DB}}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$randomResult\ instanceof\ \(\backslash\)PDOStatement)\ \{}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \$fungus\ =\ \$randomResult-\/>fetch(\(\backslash\)PDO::FETCH\_ASSOC);}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (is\_array(\$randomResult)\ \&\&\ !empty(\$randomResult))\ \{}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Si\ ya\ es\ un\ array\ (quizás\ el\ método\ query\ ya\ procesa\ el\ resultado)}}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \$fungus\ =\ isset(\$randomResult[0])\ ?\ \$randomResult[0]\ :\ \$randomResult;}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \$fungus\ =\ \textcolor{keyword}{null};}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$fungus)\ \{}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Incrementar\ el\ contador\ de\ vistas\ para\ este\ hongo}}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a4e795756d06c8d0ff755c20645eddb12}{incrementFungiViews}}(\$fungus[\textcolor{stringliteral}{'id'}]);}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Cargar\ las\ imágenes\ relacionadas}}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ \$fungus\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a69ba801a8491aa101cefc5928144e616}{loadFungusImages}}(\$fungus);}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Registrar\ para\ depuración}}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}Cargando\ hongo\ aleatorio:\ "{}}\ .\ json\_encode(\$fungus[\textcolor{stringliteral}{'name'}]\ ??\ \textcolor{stringliteral}{'No\ encontrado'}));}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$fungus;}
\DoxyCodeLine{00192\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{FungiController_8php_source_l00083}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}increment\+Fungi\+Views()}} y \mbox{\hyperlink{FungiController_8php_source_l00200}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}load\+Fungus\+Images()}}.



Referenciado por \mbox{\hyperlink{FungiController_8php_source_l00270}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}random\+Fungus\+Handler()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1FungiController_a3a07c5dd018b701663a2a46a52f74a6d_cgraph}
\end{center}
\end{figure}
Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1FungiController_a3a07c5dd018b701663a2a46a52f74a6d_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_a35fbbcc5cad471348611c0e1cfafebd7}\label{classApp_1_1Controllers_1_1FungiController_a35fbbcc5cad471348611c0e1cfafebd7} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!hasUserLikedFungi@{hasUserLikedFungi}}
\index{hasUserLikedFungi@{hasUserLikedFungi}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{hasUserLikedFungi()}{hasUserLikedFungi()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::has\+User\+Liked\+Fungi (\begin{DoxyParamCaption}\item[{}]{\$user\+Id,  }\item[{}]{\$fungi\+Id }\end{DoxyParamCaption})}



Verifica si un usuario ha dado like a un hongo. 


\begin{DoxyParams}[1]{Parámetros}
int & {\em \$user\+Id} & ID del usuario \\
\hline
int & {\em \$fungi\+Id} & ID del hongo\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
bool TRUE si el usuario ha dado like, FALSE en caso contrario 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00101}{101}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00102\ \ \ \ \ \{}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \$result\ =\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}SELECT\ 1\ FROM\ user\_likes\ WHERE\ user\_id\ =\ ?\ AND\ fungi\_id\ =\ ?"{}},}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \ \ \ \ [\$userId,\ \$fungiId]}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ !empty(\$result);}
\DoxyCodeLine{00108\ \ \ \ \ \}}

\end{DoxyCode}


Referenciado por \mbox{\hyperlink{FungiController_8php_source_l00118}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}get\+Fungus\+With\+Like\+Status()}}.

Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1FungiController_a35fbbcc5cad471348611c0e1cfafebd7_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_a4e795756d06c8d0ff755c20645eddb12}\label{classApp_1_1Controllers_1_1FungiController_a4e795756d06c8d0ff755c20645eddb12} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!incrementFungiViews@{incrementFungiViews}}
\index{incrementFungiViews@{incrementFungiViews}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{incrementFungiViews()}{incrementFungiViews()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::increment\+Fungi\+Views (\begin{DoxyParamCaption}\item[{}]{\$fungi\+Id }\end{DoxyParamCaption})}



Incrementa el contador de vistas de un hongo. 


\begin{DoxyParams}[1]{Parámetros}
int & {\em \$fungi\+Id} & ID del hongo\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
mixed Resultado de la consulta a la base de datos 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00083}{83}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00084\ \ \ \ \ \{}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}INSERT\ INTO\ fungi\_popularity\ (fungi\_id,\ views,\ likes)\ }}
\DoxyCodeLine{00087\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ VALUES\ (?,\ 1,\ 0)\ }}
\DoxyCodeLine{00088\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ ON\ DUPLICATE\ KEY\ UPDATE\ views\ =\ views\ +\ 1"{}},}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ [\$fungiId]}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00091\ \ \ \ \ \}}

\end{DoxyCode}


Referenciado por \mbox{\hyperlink{FungiController_8php_source_l00165}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}get\+Random\+Fungus()}}.

Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1FungiController_a4e795756d06c8d0ff755c20645eddb12_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_a61834711a6b3748eca87a0644c08babb}\label{classApp_1_1Controllers_1_1FungiController_a61834711a6b3748eca87a0644c08babb} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!likeFungi@{likeFungi}}
\index{likeFungi@{likeFungi}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{likeFungi()}{likeFungi()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::like\+Fungi (\begin{DoxyParamCaption}\item[{}]{\$user\+Id,  }\item[{}]{\$fungi\+Id }\end{DoxyParamCaption})}



Registra que un usuario ha dado like a un hongo. 


\begin{DoxyParams}[1]{Parámetros}
int & {\em \$user\+Id} & ID del usuario \\
\hline
int & {\em \$fungi\+Id} & ID del hongo\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
mixed Resultado de la consulta a la base de datos 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00036}{36}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00037\ \ \ \ \ \{}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}INSERT\ INTO\ user\_likes\ (user\_id,\ fungi\_id)\ VALUES\ (?,\ ?)"{}},}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ [\$userId,\ \$fungiId]}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00042\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_a69ba801a8491aa101cefc5928144e616}\label{classApp_1_1Controllers_1_1FungiController_a69ba801a8491aa101cefc5928144e616} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!loadFungusImages@{loadFungusImages}}
\index{loadFungusImages@{loadFungusImages}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{loadFungusImages()}{loadFungusImages()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::load\+Fungus\+Images (\begin{DoxyParamCaption}\item[{}]{\$fungus }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Carga las imágenes relacionadas con un hongo desde la tabla de relaciones. 


\begin{DoxyParams}[1]{Parámetros}
array & {\em \$fungus} & Datos del hongo \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Datos del hongo con las URLs de imágenes añadidas 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00200}{200}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00201\ \ \ \ \ \{}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Consultar\ las\ imágenes\ relacionadas\ a\ través\ de\ la\ tabla\ de\ relación}}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \$imagesResult\ =\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}SELECT\ i.filename,\ i.config\_key\ }}
\DoxyCodeLine{00205\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ FROM\ images\ i\ }}
\DoxyCodeLine{00206\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ JOIN\ fungi\_images\ fi\ ON\ i.id\ =\ fi.image\_id\ }}
\DoxyCodeLine{00207\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ WHERE\ fi.fungi\_id\ =\ ?"{}},}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \ \ \ \ [\$fungus[\textcolor{stringliteral}{'id'}]]}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \$imageUrls\ =\ [];}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Si\ hay\ resultados,\ procesarlos}}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$imagesResult)\ \{}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$imagesResult\ instanceof\ \(\backslash\)PDOStatement)\ \{}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$images\ =\ \$imagesResult-\/>fetchAll(\(\backslash\)PDO::FETCH\_ASSOC);}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$images\ =\ is\_array(\$imagesResult)\ ?\ \$imagesResult\ :\ [\$imagesResult];}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{foreach}\ (\$images\ as\ \$image)\ \{}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Construir\ la\ URL\ completa\ de\ la\ imagen\ basada\ en\ la\ config\_key}}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$basePath\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a7f868fa3d67eefa14cd17d62e80b3d3d}{getImageBasePath}}(\$image[\textcolor{stringliteral}{'config\_key'}]);}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$imageUrls[]\ =\ \$basePath\ .\ \textcolor{charliteral}{'/'}\ .\ \$image[\textcolor{stringliteral}{'filename'}];}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Si\ no\ hay\ imágenes,\ usar\ una\ por\ defecto}}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (empty(\$imageUrls))\ \{}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \ \ \$imageUrls[]\ =\ \textcolor{stringliteral}{'/assets/images/placeholder.jpg'};}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}No\ se\ encontraron\ imágenes\ para\ el\ hongo\ ID:\ "{}}\ .\ \$fungus[\textcolor{stringliteral}{'id'}]);}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Guardar\ las\ URLs\ como\ una\ cadena\ separada\ por\ comas\ (para\ mantener\ compatibilidad)}}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \$fungus[\textcolor{stringliteral}{'image\_urls'}]\ =\ implode(\textcolor{charliteral}{','},\ \$imageUrls);}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Para\ depuración}}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}URLs\ de\ imágenes\ para\ hongo\ ID\ "{}}\ .\ \$fungus[\textcolor{stringliteral}{'id'}]\ .\ \textcolor{stringliteral}{"{}:\ "{}}\ .\ \$fungus[\textcolor{stringliteral}{'image\_urls'}]);}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$fungus;}
\DoxyCodeLine{00241\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{FungiController_8php_source_l00249}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}get\+Image\+Base\+Path()}}.



Referenciado por \mbox{\hyperlink{FungiController_8php_source_l00132}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}get\+Fungus\+By\+Id()}} y \mbox{\hyperlink{FungiController_8php_source_l00165}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}get\+Random\+Fungus()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1FungiController_a69ba801a8491aa101cefc5928144e616_cgraph}
\end{center}
\end{figure}
Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1FungiController_a69ba801a8491aa101cefc5928144e616_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_ade6fc0ad20f30ba8d2ba5efcf3d7064c}\label{classApp_1_1Controllers_1_1FungiController_ade6fc0ad20f30ba8d2ba5efcf3d7064c} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!randomFungusHandler@{randomFungusHandler}}
\index{randomFungusHandler@{randomFungusHandler}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{randomFungusHandler()}{randomFungusHandler()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::random\+Fungus\+Handler (\begin{DoxyParamCaption}\item[{}]{\$twig,  }\item[{}]{\$db,  }\item[{}]{\$session }\end{DoxyParamCaption})}



Manejador para la ruta de hongo aleatorio. 


\begin{DoxyParams}[1]{Parámetros}
object & {\em \$twig} & Instancia de Twig \\
\hline
object & {\em \$db} & Instancia de la base de datos \\
\hline
object & {\em \$session} & Controlador de sesión \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Datos para la plantilla 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00270}{270}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00271\ \ \ \ \ \{}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Obtener\ un\ hongo\ aleatorio}}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \$fungus\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a3a07c5dd018b701663a2a46a52f74a6d}{getRandomFungus}}();}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\$fungus)\ \{}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ header(\textcolor{stringliteral}{'Location:\ /404'});}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ exit;}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Añadir\ información\ de\ like\ si\ el\ usuario\ está\ logueado}}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{routes_8php_abefb3c26429d514777313e9a63d7cbac}{\$session}}-\/>isLoggedIn())\ \{}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ \$fungus\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_add0b456287a79c088c78a9fe8c469451}{getFungusWithLikeStatus}}(\$fungus,\ \$\_SESSION[\textcolor{stringliteral}{'user\_id'}]);}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'title'}\ =>\ \_(\textcolor{stringliteral}{'Hongo\ aleatorio'}),}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'fungi'}\ =>\ \$fungus}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ ];}
\DoxyCodeLine{00289\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{routes_8php_source_l00093}{\$session}}, \mbox{\hyperlink{FungiController_8php_source_l00118}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}get\+Fungus\+With\+Like\+Status()}} y \mbox{\hyperlink{FungiController_8php_source_l00165}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}get\+Random\+Fungus()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1FungiController_ade6fc0ad20f30ba8d2ba5efcf3d7064c_cgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_a087b8275e77143716ac62ea228074a20}\label{classApp_1_1Controllers_1_1FungiController_a087b8275e77143716ac62ea228074a20} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!unlikeFungi@{unlikeFungi}}
\index{unlikeFungi@{unlikeFungi}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{unlikeFungi()}{unlikeFungi()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::unlike\+Fungi (\begin{DoxyParamCaption}\item[{}]{\$user\+Id,  }\item[{}]{\$fungi\+Id }\end{DoxyParamCaption})}



Elimina el like de un usuario a un hongo. 


\begin{DoxyParams}[1]{Parámetros}
int & {\em \$user\+Id} & ID del usuario \\
\hline
int & {\em \$fungi\+Id} & ID del hongo\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
mixed Resultado de la consulta a la base de datos 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00052}{52}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00053\ \ \ \ \ \{}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}DELETE\ FROM\ user\_likes\ WHERE\ user\_id\ =\ ?\ AND\ fungi\_id\ =\ ?"{}},}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \ [\$userId,\ \$fungiId]}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00058\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_af994c3d12f7062ddd44a40c3505bff3d}\label{classApp_1_1Controllers_1_1FungiController_af994c3d12f7062ddd44a40c3505bff3d} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!updateFungiLikes@{updateFungiLikes}}
\index{updateFungiLikes@{updateFungiLikes}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{updateFungiLikes()}{updateFungiLikes()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::update\+Fungi\+Likes (\begin{DoxyParamCaption}\item[{}]{\$fungi\+Id,  }\item[{}]{\$increment }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Actualiza el contador de likes de un hongo. 


\begin{DoxyParams}[1]{Parámetros}
int & {\em \$fungi\+Id} & ID del hongo \\
\hline
int & {\em \$increment} & Valor de incremento (positivo) o decremento (negativo)\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
mixed Resultado de la consulta a la base de datos 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00068}{68}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00069\ \ \ \ \ \{}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}UPDATE\ fungi\_popularity\ SET\ likes\ =\ likes\ +\ ?\ WHERE\ fungi\_id\ =\ ?"{}},}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ [\$increment,\ \$fungiId]}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00074\ \ \ \ \ \}}

\end{DoxyCode}


\doxysubsection{Documentación de datos miembro}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_ab1b8e71c0976e182854ff195764611c6}\label{classApp_1_1Controllers_1_1FungiController_ab1b8e71c0976e182854ff195764611c6} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!\$db@{\$db}}
\index{\$db@{\$db}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{\$db}{\$db}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::\$db\hspace{0.3cm}{\ttfamily [private]}}



Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00016}{16}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.



Referenciado por \mbox{\hyperlink{FungiController_8php_source_l00023}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}\+\_\+\+\_\+construct()}}.



La documentación de esta clase está generada del siguiente archivo\+:\begin{DoxyCompactItemize}
\item 
src/controllers/\mbox{\hyperlink{FungiController_8php}{Fungi\+Controller.\+php}}\end{DoxyCompactItemize}
