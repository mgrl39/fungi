\doxysection{Referencia de la clase App\textbackslash{}Controllers\textbackslash{}Fungi\+Controller}
\hypertarget{classApp_1_1Controllers_1_1FungiController}{}\label{classApp_1_1Controllers_1_1FungiController}\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}


Controlador para la gestión de hongos (fungi) en la aplicación.  




Diagrama de colaboración de App\textbackslash{}Controllers\textbackslash{}Fungi\+Controller\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=243pt]{classApp_1_1Controllers_1_1FungiController__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Métodos públicos}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_af7000ed08fe4bc6c08d0b40591e112b7}{\+\_\+\+\_\+construct}} (\$db)
\begin{DoxyCompactList}\small\item\em Constructor de la clase Fungi\+Controller. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a9d16717512fc95fa89a23c45ad840b7b}{detail\+Fungus\+Handler}} (\$twig, \$db, \$session, \$params=\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em Manejador para la ruta de detalles del hongo. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a0bb355407938be2032959dd234e0b13c}{get\+Fungus\+By\+Id}} (\$id)
\begin{DoxyCompactList}\small\item\em Obtiene un hongo por su ID. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_add0b456287a79c088c78a9fe8c469451}{get\+Fungus\+With\+Like\+Status}} (\$fungus, \$user\+Id)
\begin{DoxyCompactList}\small\item\em Añade el estado de like de un usuario a la información de un hongo. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a3a07c5dd018b701663a2a46a52f74a6d}{get\+Random\+Fungus}} ()
\begin{DoxyCompactList}\small\item\em Obtiene un hongo aleatorio de la base de datos. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a581bbd139fc7c3b8b0557b244af8ed9f}{get\+Similar\+Fungi}} (\$id, \$limit=4)
\begin{DoxyCompactList}\small\item\em Busca hongos similares al hongo especificado. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a35fbbcc5cad471348611c0e1cfafebd7}{has\+User\+Liked\+Fungi}} (\$user\+Id, \$fungi\+Id)
\begin{DoxyCompactList}\small\item\em Verifica si un usuario ha dado like a un hongo. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a4e795756d06c8d0ff755c20645eddb12}{increment\+Fungi\+Views}} (\$fungi\+Id)
\begin{DoxyCompactList}\small\item\em Incrementa el contador de vistas de un hongo. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a61834711a6b3748eca87a0644c08babb}{like\+Fungi}} (\$user\+Id, \$fungi\+Id)
\begin{DoxyCompactList}\small\item\em Registra que un usuario ha dado like a un hongo. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_ade6fc0ad20f30ba8d2ba5efcf3d7064c}{random\+Fungus\+Handler}} (\$twig, \$db, \$session)
\begin{DoxyCompactList}\small\item\em Manejador para la ruta de hongo aleatorio. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a087b8275e77143716ac62ea228074a20}{unlike\+Fungi}} (\$user\+Id, \$fungi\+Id)
\begin{DoxyCompactList}\small\item\em Elimina el like de un usuario a un hongo. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Métodos privados}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_af994c3d12f7062ddd44a40c3505bff3d}{update\+Fungi\+Likes}} (\$fungi\+Id, \$increment)
\begin{DoxyCompactList}\small\item\em Actualiza el contador de likes de un hongo. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Atributos privados}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_ab1b8e71c0976e182854ff195764611c6}{\$db}}
\end{DoxyCompactItemize}


\doxysubsection{Descripción detallada}
Controlador para la gestión de hongos (fungi) en la aplicación. 

Esta clase maneja las operaciones relacionadas con los hongos, incluyendo likes, vistas y consultas de información 

Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00013}{13}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.



\doxysubsection{Documentación de constructores y destructores}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_af7000ed08fe4bc6c08d0b40591e112b7}\label{classApp_1_1Controllers_1_1FungiController_af7000ed08fe4bc6c08d0b40591e112b7} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!\_\_construct@{\_\_construct}}
\index{\_\_construct@{\_\_construct}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{\_\_construct()}{\_\_construct()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::\+\_\+\+\_\+construct (\begin{DoxyParamCaption}\item[{}]{\$db }\end{DoxyParamCaption})}



Constructor de la clase Fungi\+Controller. 


\begin{DoxyParams}[1]{Parámetros}
object & {\em \$db} & Instancia del controlador de base de datos \\
\hline
\end{DoxyParams}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00023}{23}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00024\ \ \ \ \ \{}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \$this-\/>db\ =\ \mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_ab1b8e71c0976e182854ff195764611c6}{\$db}};}
\DoxyCodeLine{00026\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{FungiController_8php_source_l00016}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}\$db}}.



\doxysubsection{Documentación de funciones miembro}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_a9d16717512fc95fa89a23c45ad840b7b}\label{classApp_1_1Controllers_1_1FungiController_a9d16717512fc95fa89a23c45ad840b7b} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!detailFungusHandler@{detailFungusHandler}}
\index{detailFungusHandler@{detailFungusHandler}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{detailFungusHandler()}{detailFungusHandler()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::detail\+Fungus\+Handler (\begin{DoxyParamCaption}\item[{}]{\$twig,  }\item[{}]{\$db,  }\item[{}]{\$session,  }\item[{}]{\$params = {\ttfamily \mbox{[}\mbox{]}} }\end{DoxyParamCaption})}



Manejador para la ruta de detalles del hongo. 


\begin{DoxyParams}[1]{Parámetros}
object & {\em \$twig} & Instancia de Twig \\
\hline
object & {\em \$db} & Instancia de la base de datos \\
\hline
object & {\em \$session} & Controlador de sesión \\
\hline
array & {\em \$params} & Parámetros de la ruta \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Datos para la plantilla 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00280}{280}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00281\ \ \ \ \ \{}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Primero\ asegúrate\ de\ obtener\ el\ ID\ correctamente\ del\ parámetro}}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \$id\ =\ \textcolor{keyword}{null};}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Verificar\ si\ hay\ parámetros\ en\ el\ array\ numérico}}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_array(\$params)\ \&\&\ !empty(\$params))\ \{}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \$id\ =\ \$params[0]\ ??\ \textcolor{keyword}{null};}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Si\ no\ hay\ ID\ aún,\ intenta\ obtenerlo\ de\ la\ URL}}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (empty(\$id)\ \&\&\ isset(\$\_SERVER[\textcolor{stringliteral}{'REQUEST\_URI'}]))\ \{}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \ \ \ \ preg\_match(\textcolor{stringliteral}{'\#\string^/fungi/(\(\backslash\)d+)\$\#'},\ \$\_SERVER[\textcolor{stringliteral}{'REQUEST\_URI'}],\ \$matches);}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \ \ \ \ \$id\ =\ \$matches[1]\ ??\ \textcolor{keyword}{null};}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}FungiController::detailFungusHandler\ -\/\ ID:\ "{}}\ .\ (\$id\ ??\ \textcolor{stringliteral}{'no\ ID'}));}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ El\ resto\ de\ tu\ lógica...}}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \$fungus\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a0bb355407938be2032959dd234e0b13c}{getFungusById}}(\$id);}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\$fungus)\ \{}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \ \ \ \ header(\textcolor{stringliteral}{'Location:\ /404'});}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \ \ \ \ exit;}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ...\ resto\ del\ código\ ...}}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'title'}\ =>\ \$fungus[\textcolor{stringliteral}{'name'}]\ ??\ \_(\textcolor{stringliteral}{'Detalles\ del\ Hongo'}),}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'fungi'}\ =>\ \$fungus,}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'similar\_fungi'}\ =>\ \$similarFungi\ ??\ [],}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'is\_logged\_in'}\ =>\ \mbox{\hyperlink{routes_8php_abefb3c26429d514777313e9a63d7cbac}{\$session}}-\/>isLoggedIn()}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ ];}
\DoxyCodeLine{00314\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{routes_8php_source_l00093}{\$session}} y \mbox{\hyperlink{FungiController_8php_source_l00132}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}get\+Fungus\+By\+Id()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1FungiController_a9d16717512fc95fa89a23c45ad840b7b_cgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_a0bb355407938be2032959dd234e0b13c}\label{classApp_1_1Controllers_1_1FungiController_a0bb355407938be2032959dd234e0b13c} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!getFungusById@{getFungusById}}
\index{getFungusById@{getFungusById}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{getFungusById()}{getFungusById()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::get\+Fungus\+By\+Id (\begin{DoxyParamCaption}\item[{}]{\$id }\end{DoxyParamCaption})}



Obtiene un hongo por su ID. 


\begin{DoxyParams}[1]{Parámetros}
int & {\em \$id} & ID del hongo a buscar \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array\texorpdfstring{$\vert$}{|}null Datos del hongo o null si no se encuentra 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00132}{132}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00133\ \ \ \ \ \{}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \$result\ =\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}SELECT\ *\ FROM\ fungi\ WHERE\ id\ =\ ?\ LIMIT\ 1"{}},}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ [\$id]}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Si\ el\ resultado\ es\ un\ objeto\ PDOStatement,\ convertirlo\ a\ array}}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$result\ instanceof\ \(\backslash\)PDOStatement)\ \{}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$result-\/>fetch(\(\backslash\)PDO::FETCH\_ASSOC)\ ?:\ \textcolor{keyword}{null};}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Si\ el\ resultado\ es\ un\ array\ con\ índices\ numéricos\ (múltiples\ filas)}}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_array(\$result)\ \&\&\ !empty(\$result)\ \&\&\ isset(\$result[0]))\ \{}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$result[0];}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Si\ ya\ es\ un\ array\ asociativo\ simple\ o\ está\ vacío}}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$result\ ?:\ \textcolor{keyword}{null};}
\DoxyCodeLine{00151\ \ \ \ \ \}}

\end{DoxyCode}


Referenciado por \mbox{\hyperlink{FungiController_8php_source_l00280}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}detail\+Fungus\+Handler()}} y \mbox{\hyperlink{FungiController_8php_source_l00160}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}get\+Similar\+Fungi()}}.

Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1FungiController_a0bb355407938be2032959dd234e0b13c_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_add0b456287a79c088c78a9fe8c469451}\label{classApp_1_1Controllers_1_1FungiController_add0b456287a79c088c78a9fe8c469451} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!getFungusWithLikeStatus@{getFungusWithLikeStatus}}
\index{getFungusWithLikeStatus@{getFungusWithLikeStatus}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{getFungusWithLikeStatus()}{getFungusWithLikeStatus()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::get\+Fungus\+With\+Like\+Status (\begin{DoxyParamCaption}\item[{}]{\$fungus,  }\item[{}]{\$user\+Id }\end{DoxyParamCaption})}



Añade el estado de like de un usuario a la información de un hongo. 


\begin{DoxyParams}[1]{Parámetros}
array & {\em \$fungus} & Datos del hongo \\
\hline
int & {\em \$user\+Id} & ID del usuario\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Datos del hongo con el estado de like añadido 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00118}{118}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00119\ \ \ \ \ \{}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$fungus\ \&\&\ \$userId)\ \{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \$fungus[\textcolor{stringliteral}{'is\_liked'}]\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a35fbbcc5cad471348611c0e1cfafebd7}{hasUserLikedFungi}}(\$userId,\ \$fungus[\textcolor{stringliteral}{'id'}]);}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$fungus;}
\DoxyCodeLine{00124\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{FungiController_8php_source_l00101}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}has\+User\+Liked\+Fungi()}}.



Referenciado por \mbox{\hyperlink{FungiController_8php_source_l00250}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}random\+Fungus\+Handler()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1FungiController_add0b456287a79c088c78a9fe8c469451_cgraph}
\end{center}
\end{figure}
Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1FungiController_add0b456287a79c088c78a9fe8c469451_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_a3a07c5dd018b701663a2a46a52f74a6d}\label{classApp_1_1Controllers_1_1FungiController_a3a07c5dd018b701663a2a46a52f74a6d} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!getRandomFungus@{getRandomFungus}}
\index{getRandomFungus@{getRandomFungus}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{getRandomFungus()}{getRandomFungus()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::get\+Random\+Fungus (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Obtiene un hongo aleatorio de la base de datos. 

\begin{DoxyReturn}{Devuelve}
array\texorpdfstring{$\vert$}{|}null Datos del hongo aleatorio o null si no se encuentra ninguno 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00216}{216}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00217\ \ \ \ \ \{}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \$query\ =\ \textcolor{stringliteral}{"{}SELECT\ *\ FROM\ fungi\ ORDER\ BY\ RAND()\ LIMIT\ 1"{}};}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \$randomResult\ =\ \$this-\/>db-\/>query(\$query);}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Procesar\ el\ resultado\ según\ el\ tipo\ de\ retorno\ de\ la\ DB}}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$randomResult\ instanceof\ \(\backslash\)PDOStatement)\ \{}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \$fungus\ =\ \$randomResult-\/>fetch(\(\backslash\)PDO::FETCH\_ASSOC);}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (is\_array(\$randomResult)\ \&\&\ !empty(\$randomResult))\ \{}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Si\ ya\ es\ un\ array\ (quizás\ el\ método\ query\ ya\ procesa\ el\ resultado)}}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \ \ \ \ \$fungus\ =\ isset(\$randomResult[0])\ ?\ \$randomResult[0]\ :\ \$randomResult;}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \ \ \ \ \$fungus\ =\ \textcolor{keyword}{null};}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$fungus)\ \{}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Incrementar\ el\ contador\ de\ vistas\ para\ este\ hongo}}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a4e795756d06c8d0ff755c20645eddb12}{incrementFungiViews}}(\$fungus[\textcolor{stringliteral}{'id'}]);}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Registrar\ para\ depuración}}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ \ \ error\_log(\textcolor{stringliteral}{"{}Cargando\ hongo\ aleatorio:\ "{}}\ .\ json\_encode(\$fungus[\textcolor{stringliteral}{'name'}]\ ??\ \textcolor{stringliteral}{'No\ encontrado'}));}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$fungus;}
\DoxyCodeLine{00240\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{FungiController_8php_source_l00083}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}increment\+Fungi\+Views()}}.



Referenciado por \mbox{\hyperlink{FungiController_8php_source_l00250}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}random\+Fungus\+Handler()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1FungiController_a3a07c5dd018b701663a2a46a52f74a6d_cgraph}
\end{center}
\end{figure}
Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1FungiController_a3a07c5dd018b701663a2a46a52f74a6d_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_a581bbd139fc7c3b8b0557b244af8ed9f}\label{classApp_1_1Controllers_1_1FungiController_a581bbd139fc7c3b8b0557b244af8ed9f} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!getSimilarFungi@{getSimilarFungi}}
\index{getSimilarFungi@{getSimilarFungi}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{getSimilarFungi()}{getSimilarFungi()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::get\+Similar\+Fungi (\begin{DoxyParamCaption}\item[{}]{\$id,  }\item[{}]{\$limit = {\ttfamily 4} }\end{DoxyParamCaption})}



Busca hongos similares al hongo especificado. 


\begin{DoxyParams}[1]{Parámetros}
int & {\em \$id} & ID del hongo para el que buscar similares \\
\hline
int & {\em \$limit} & Número máximo de hongos similares a devolver (por defecto 4) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Lista de hongos similares 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00160}{160}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00161\ \ \ \ \ \{}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Primero\ obtenemos\ los\ datos\ del\ hongo\ para\ el\ que\ queremos\ buscar\ similares}}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \$fungi\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a0bb355407938be2032959dd234e0b13c}{getFungusById}}(\$id);}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (empty(\$fungi)\ ||\ !is\_array(\$fungi))\ \{}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [];}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Buscar\ hongos\ con\ características\ similares}}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \$query\ =\ \textcolor{stringliteral}{"{}SELECT\ f.*\ FROM\ fungi\ f\ }}
\DoxyCodeLine{00171\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WHERE\ f.id\ !=\ ?\ }}
\DoxyCodeLine{00172\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ AND\ (f.family\ =\ ?\ OR\ f.genus\ =\ ?\ OR\ f.habitat\ LIKE\ ?)}}
\DoxyCodeLine{00173\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ORDER\ BY\ RAND()\ }}
\DoxyCodeLine{00174\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ LIMIT\ ?"{}};}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \$habitat\ =\ isset(\$fungi[\textcolor{stringliteral}{'habitat'}])\ ?\ \$fungi[\textcolor{stringliteral}{'habitat'}]\ :\ \textcolor{stringliteral}{''};}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \$family\ =\ isset(\$fungi[\textcolor{stringliteral}{'family'}])\ ?\ \$fungi[\textcolor{stringliteral}{'family'}]\ :\ \textcolor{stringliteral}{''};}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \$genus\ =\ isset(\$fungi[\textcolor{stringliteral}{'genus'}])\ ?\ \$fungi[\textcolor{stringliteral}{'genus'}]\ :\ \textcolor{stringliteral}{''};}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \$similarFungi\ =\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \$query,}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ [\$id,\ \$family,\ \$genus,\ \textcolor{stringliteral}{"{}\%\$habitat\%"{}},\ \$limit]}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Si\ el\ resultado\ es\ un\ objeto\ PDOStatement,\ convertirlo\ a\ array}}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$similarFungi\ \&\&\ is\_object(\$similarFungi)\ \&\&\ method\_exists(\$similarFungi,\ \textcolor{stringliteral}{'fetchAll'}))\ \{}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \$similarFungi\ =\ \$similarFungi-\/>fetchAll(\(\backslash\)PDO::FETCH\_ASSOC);}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Si\ no\ hay\ resultados,\ intentamos\ una\ búsqueda\ más\ amplia}}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (empty(\$similarFungi))\ \{}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \$query\ =\ \textcolor{stringliteral}{"{}SELECT\ f.*\ FROM\ fungi\ f\ }}
\DoxyCodeLine{00193\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WHERE\ f.id\ !=\ ?\ }}
\DoxyCodeLine{00194\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ORDER\ BY\ RAND()\ }}
\DoxyCodeLine{00195\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ LIMIT\ ?"{}};}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \ \ \ \ \$similarFungi\ =\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$query,}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\$id,\ \$limit]}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Si\ el\ resultado\ es\ un\ objeto\ PDOStatement,\ convertirlo\ a\ array}}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$similarFungi\ \&\&\ is\_object(\$similarFungi)\ \&\&\ method\_exists(\$similarFungi,\ \textcolor{stringliteral}{'fetchAll'}))\ \{}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$similarFungi\ =\ \$similarFungi-\/>fetchAll(\(\backslash\)PDO::FETCH\_ASSOC);}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$similarFungi\ ?:\ [];}
\DoxyCodeLine{00209\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{FungiController_8php_source_l00132}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}get\+Fungus\+By\+Id()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1FungiController_a581bbd139fc7c3b8b0557b244af8ed9f_cgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_a35fbbcc5cad471348611c0e1cfafebd7}\label{classApp_1_1Controllers_1_1FungiController_a35fbbcc5cad471348611c0e1cfafebd7} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!hasUserLikedFungi@{hasUserLikedFungi}}
\index{hasUserLikedFungi@{hasUserLikedFungi}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{hasUserLikedFungi()}{hasUserLikedFungi()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::has\+User\+Liked\+Fungi (\begin{DoxyParamCaption}\item[{}]{\$user\+Id,  }\item[{}]{\$fungi\+Id }\end{DoxyParamCaption})}



Verifica si un usuario ha dado like a un hongo. 


\begin{DoxyParams}[1]{Parámetros}
int & {\em \$user\+Id} & ID del usuario \\
\hline
int & {\em \$fungi\+Id} & ID del hongo\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
bool TRUE si el usuario ha dado like, FALSE en caso contrario 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00101}{101}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00102\ \ \ \ \ \{}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \$result\ =\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}SELECT\ 1\ FROM\ user\_likes\ WHERE\ user\_id\ =\ ?\ AND\ fungi\_id\ =\ ?"{}},}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \ \ \ \ [\$userId,\ \$fungiId]}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ !empty(\$result);}
\DoxyCodeLine{00108\ \ \ \ \ \}}

\end{DoxyCode}


Referenciado por \mbox{\hyperlink{FungiController_8php_source_l00118}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}get\+Fungus\+With\+Like\+Status()}}.

Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1FungiController_a35fbbcc5cad471348611c0e1cfafebd7_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_a4e795756d06c8d0ff755c20645eddb12}\label{classApp_1_1Controllers_1_1FungiController_a4e795756d06c8d0ff755c20645eddb12} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!incrementFungiViews@{incrementFungiViews}}
\index{incrementFungiViews@{incrementFungiViews}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{incrementFungiViews()}{incrementFungiViews()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::increment\+Fungi\+Views (\begin{DoxyParamCaption}\item[{}]{\$fungi\+Id }\end{DoxyParamCaption})}



Incrementa el contador de vistas de un hongo. 


\begin{DoxyParams}[1]{Parámetros}
int & {\em \$fungi\+Id} & ID del hongo\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
mixed Resultado de la consulta a la base de datos 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00083}{83}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00084\ \ \ \ \ \{}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}INSERT\ INTO\ fungi\_popularity\ (fungi\_id,\ views,\ likes)\ }}
\DoxyCodeLine{00087\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ VALUES\ (?,\ 1,\ 0)\ }}
\DoxyCodeLine{00088\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ ON\ DUPLICATE\ KEY\ UPDATE\ views\ =\ views\ +\ 1"{}},}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ [\$fungiId]}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00091\ \ \ \ \ \}}

\end{DoxyCode}


Referenciado por \mbox{\hyperlink{FungiController_8php_source_l00216}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}get\+Random\+Fungus()}}.

Gráfico de llamadas a esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1FungiController_a4e795756d06c8d0ff755c20645eddb12_icgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_a61834711a6b3748eca87a0644c08babb}\label{classApp_1_1Controllers_1_1FungiController_a61834711a6b3748eca87a0644c08babb} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!likeFungi@{likeFungi}}
\index{likeFungi@{likeFungi}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{likeFungi()}{likeFungi()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::like\+Fungi (\begin{DoxyParamCaption}\item[{}]{\$user\+Id,  }\item[{}]{\$fungi\+Id }\end{DoxyParamCaption})}



Registra que un usuario ha dado like a un hongo. 


\begin{DoxyParams}[1]{Parámetros}
int & {\em \$user\+Id} & ID del usuario \\
\hline
int & {\em \$fungi\+Id} & ID del hongo\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
mixed Resultado de la consulta a la base de datos 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00036}{36}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00037\ \ \ \ \ \{}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}INSERT\ INTO\ user\_likes\ (user\_id,\ fungi\_id)\ VALUES\ (?,\ ?)"{}},}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ [\$userId,\ \$fungiId]}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00042\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_ade6fc0ad20f30ba8d2ba5efcf3d7064c}\label{classApp_1_1Controllers_1_1FungiController_ade6fc0ad20f30ba8d2ba5efcf3d7064c} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!randomFungusHandler@{randomFungusHandler}}
\index{randomFungusHandler@{randomFungusHandler}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{randomFungusHandler()}{randomFungusHandler()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::random\+Fungus\+Handler (\begin{DoxyParamCaption}\item[{}]{\$twig,  }\item[{}]{\$db,  }\item[{}]{\$session }\end{DoxyParamCaption})}



Manejador para la ruta de hongo aleatorio. 


\begin{DoxyParams}[1]{Parámetros}
object & {\em \$twig} & Instancia de Twig \\
\hline
object & {\em \$db} & Instancia de la base de datos \\
\hline
object & {\em \$session} & Controlador de sesión \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array Datos para la plantilla 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00250}{250}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00251\ \ \ \ \ \{}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Obtener\ un\ hongo\ aleatorio}}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \$fungus\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_a3a07c5dd018b701663a2a46a52f74a6d}{getRandomFungus}}();}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\$fungus)\ \{}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \ \ \ \ header(\textcolor{stringliteral}{'Location:\ /404'});}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ exit;}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Añadir\ información\ de\ like\ si\ el\ usuario\ está\ logueado}}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{routes_8php_abefb3c26429d514777313e9a63d7cbac}{\$session}}-\/>isLoggedIn())\ \{}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ \$fungus\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Controllers_1_1FungiController_add0b456287a79c088c78a9fe8c469451}{getFungusWithLikeStatus}}(\$fungus,\ \$\_SESSION[\textcolor{stringliteral}{'user\_id'}]);}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'title'}\ =>\ \_(\textcolor{stringliteral}{'Hongo\ aleatorio'}),}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'fungi'}\ =>\ \$fungus}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ ];}
\DoxyCodeLine{00269\ \ \ \ \ \}}

\end{DoxyCode}


Hace referencia a \mbox{\hyperlink{routes_8php_source_l00093}{\$session}}, \mbox{\hyperlink{FungiController_8php_source_l00118}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}get\+Fungus\+With\+Like\+Status()}} y \mbox{\hyperlink{FungiController_8php_source_l00216}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}get\+Random\+Fungus()}}.

Gráfico de llamadas de esta función\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Controllers_1_1FungiController_ade6fc0ad20f30ba8d2ba5efcf3d7064c_cgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_a087b8275e77143716ac62ea228074a20}\label{classApp_1_1Controllers_1_1FungiController_a087b8275e77143716ac62ea228074a20} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!unlikeFungi@{unlikeFungi}}
\index{unlikeFungi@{unlikeFungi}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{unlikeFungi()}{unlikeFungi()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::unlike\+Fungi (\begin{DoxyParamCaption}\item[{}]{\$user\+Id,  }\item[{}]{\$fungi\+Id }\end{DoxyParamCaption})}



Elimina el like de un usuario a un hongo. 


\begin{DoxyParams}[1]{Parámetros}
int & {\em \$user\+Id} & ID del usuario \\
\hline
int & {\em \$fungi\+Id} & ID del hongo\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
mixed Resultado de la consulta a la base de datos 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00052}{52}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00053\ \ \ \ \ \{}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}DELETE\ FROM\ user\_likes\ WHERE\ user\_id\ =\ ?\ AND\ fungi\_id\ =\ ?"{}},}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \ [\$userId,\ \$fungiId]}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00058\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_af994c3d12f7062ddd44a40c3505bff3d}\label{classApp_1_1Controllers_1_1FungiController_af994c3d12f7062ddd44a40c3505bff3d} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!updateFungiLikes@{updateFungiLikes}}
\index{updateFungiLikes@{updateFungiLikes}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{updateFungiLikes()}{updateFungiLikes()}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::update\+Fungi\+Likes (\begin{DoxyParamCaption}\item[{}]{\$fungi\+Id,  }\item[{}]{\$increment }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Actualiza el contador de likes de un hongo. 


\begin{DoxyParams}[1]{Parámetros}
int & {\em \$fungi\+Id} & ID del hongo \\
\hline
int & {\em \$increment} & Valor de incremento (positivo) o decremento (negativo)\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
mixed Resultado de la consulta a la base de datos 
\end{DoxyReturn}


Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00068}{68}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00069\ \ \ \ \ \{}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>db-\/>query(}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}UPDATE\ fungi\_popularity\ SET\ likes\ =\ likes\ +\ ?\ WHERE\ fungi\_id\ =\ ?"{}},}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ [\$increment,\ \$fungiId]}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00074\ \ \ \ \ \}}

\end{DoxyCode}


\doxysubsection{Documentación de datos miembro}
\Hypertarget{classApp_1_1Controllers_1_1FungiController_ab1b8e71c0976e182854ff195764611c6}\label{classApp_1_1Controllers_1_1FungiController_ab1b8e71c0976e182854ff195764611c6} 
\index{App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}!\$db@{\$db}}
\index{\$db@{\$db}!App\textbackslash{}Controllers\textbackslash{}FungiController@{App\textbackslash{}Controllers\textbackslash{}FungiController}}
\doxysubsubsection{\texorpdfstring{\$db}{\$db}}
{\footnotesize\ttfamily App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\+::\$db\hspace{0.3cm}{\ttfamily [private]}}



Definición en la línea \mbox{\hyperlink{FungiController_8php_source_l00016}{16}} del archivo \mbox{\hyperlink{FungiController_8php_source}{Fungi\+Controller.\+php}}.



Referenciado por \mbox{\hyperlink{FungiController_8php_source_l00023}{App\textbackslash{}\+Controllers\textbackslash{}\+Fungi\+Controller\textbackslash{}\+\_\+\+\_\+construct()}}.



La documentación de esta clase está generada del siguiente archivo\+:\begin{DoxyCompactItemize}
\item 
src/controllers/\mbox{\hyperlink{FungiController_8php}{Fungi\+Controller.\+php}}\end{DoxyCompactItemize}
