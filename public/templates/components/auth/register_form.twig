
{% block content %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/assets/lib/twbs/bootstrap/dist/css/bootstrap.min.css">
    
    <!-- Estilos personalizados mínimos -->
    <link rel="stylesheet" href="/assets/styles/generic.css">
    <link rel="stylesheet" href="/assets/styles/components/navbar.css">
    <link rel="stylesheet" href="/assets/styles/components/footer.css">
    <link rel="stylesheet" href="/assets/styles/pages/home.css">
    <link rel="stylesheet" href="/assets/styles/components/auth/register_form.css">
    
    <!-- Font Awesome para iconos (versión local) -->
    <link rel="stylesheet" href="/assets/lib/fontawesome/fontawesome-free-6.4.0-web/css/all.min.css">
    <!-- Animate.css para animaciones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <!-- AOS para efectos de scroll -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
</head>
<body>
    <div class="auth-container">
        <div class="auth-card animate__animated animate__fadeIn" data-aos="fade-up">
            <div class="auth-header">
                <h2 class="animate__animated animate__slideInDown"><i class="fas fa-user-plus"></i> {{ _('Crear cuenta') }}</h2>
                <p>{{ _('Únete para explorar la base de datos de hongos') }}</p>
            </div>
            
            <form method="POST" action="/register" class="auth-form" id="registerForm" onsubmit="return validateForm()">
                {% if error %}
                <div class="alert alert-danger animate__animated animate__shakeX">
                    <i class="fas fa-exclamation-circle"></i> {{ error }}
                </div>
                {% endif %}

                <div class="form-group" data-aos="fade-right" data-aos-delay="100">
                    <label for="username"><i class="fas fa-user"></i> {{ _('Nombre de usuario') }}</label>
                    <input type="text" class="form-control" id="username" name="username" required placeholder="{{ _('Elige un nombre de usuario único') }}">
                </div>

                <div class="form-group" data-aos="fade-right" data-aos-delay="200">
                    <label for="email"><i class="fas fa-envelope"></i> {{ _('Correo electrónico') }}</label>
                    <input type="email" class="form-control" id="email" name="email" required placeholder="{{ _('Introduce tu correo electrónico') }}">
                </div>

                <div class="form-group" data-aos="fade-right" data-aos-delay="300">
                    <label for="password"><i class="fas fa-lock"></i> {{ _('Contraseña') }}</label>
                    <input type="password" class="form-control" id="password" name="password" required placeholder="{{ _('Crea una contraseña segura') }}">
                    <small class="form-text text-muted">{{ _('Mínimo 8 caracteres, incluyendo mayúsculas, minúsculas y números') }}</small>
                </div>

                <div class="form-group" data-aos="fade-right" data-aos-delay="400">
                    <label for="confirm_password"><i class="fas fa-lock"></i> {{ _('Confirmar contraseña') }}</label>
                    <input type="password" class="form-control" id="confirm_password" name="confirm_password" required placeholder="{{ _('Repite tu contraseña') }}">
                </div>

                <div class="form-check" data-aos="fade-up" data-aos-delay="500">
                    <input type="checkbox" class="form-check-input" id="terms" name="terms" required>
                    <label class="form-check-label" for="terms">
                        {{ _('Acepto los') }} <a href="/terms">{{ _('términos y condiciones') }}</a>
                    </label>
                </div>

                <button type="submit" class="btn btn-primary btn-block" data-aos="zoom-in" data-aos-delay="600">
                    <i class="fas fa-user-plus"></i> {{ _('Registrarse') }}
                </button>
            </form>

            <div class="auth-footer" data-aos="fade-up" data-aos-delay="700">
                <p><i class="fas fa-sign-in-alt"></i> {{ _('¿Ya tienes una cuenta?') }} <a href="/login">{{ _('Inicia sesión') }}</a></p>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Inicializar AOS
        AOS.init({
            duration: 800,
            once: true
        });

        function validateForm() {
            const username = document.getElementById('username').value.trim();
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirm_password').value;
            const terms = document.getElementById('terms').checked;
            
            let isValid = true;

            // Validar nombre de usuario
            if (username === '') {
                shakeElement('username');
                isValid = false;
            }

            // Validar email
            if (email === '' || !isValidEmail(email)) {
                shakeElement('email');
                isValid = false;
            }

            // Validar contraseña
            if (password === '' || password.length < 8) {
                shakeElement('password');
                isValid = false;
            }

            // Validar confirmación de contraseña
            if (confirmPassword === '' || confirmPassword !== password) {
                shakeElement('confirm_password');
                isValid = false;
            }

            // Validar términos
            if (!terms) {
                document.getElementById('terms').classList.add('animate__animated', 'animate__heartBeat');
                setTimeout(() => {
                    document.getElementById('terms').classList.remove('animate__animated', 'animate__heartBeat');
                }, 1000);
                isValid = false;
            }

            return isValid;
        }

        function shakeElement(elementId) {
            const element = document.getElementById(elementId);
            element.classList.add('animate__animated', 'animate__shakeX');
            setTimeout(() => {
                element.classList.remove('animate__animated', 'animate__shakeX');
            }, 1000);
        }

        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        // Remover animaciones al escribir
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('input', function() {
                this.classList.remove('animate__animated', 'animate__shakeX');
            });
        });
    </script>
</body>
</html>
{% endblock %}
